{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/gatsby-aws-study-ec2-conect-tuto/",
    "result": {"data":{"cur":{"id":"b9c1b0e3-e01c-5bd2-acf8-fddeac410b42","html":"<h2 id=\"-ec2-인스턴스-생성하기\" style=\"position:relative;\"><a href=\"#-ec2-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4-%EC%83%9D%EC%84%B1%ED%95%98%EA%B8%B0\" aria-label=\" ec2 인스턴스 생성하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🎈 EC2 인스턴스 생성하기</h2>\n<p>먼저 테스트를 위해 인스턴스를 하나 생성 합니다.</p>\n<blockquote>\n<p>🙏 ec2 생성방법은 <a href=\"https://leesungki.github.io/gatsby-aws-study-ec2-tuto/\">링크</a>를 참고해주세요! 해주세요~!</p>\n</blockquote>\n<p><img src=\"/a6a87043f3ee88a8cc33faa746577115/ec2connect1.png\" alt=\"ec2connect1.PNG\"></p>\n<p>나는 이렇게 conect라는 이름으로 생성해주었다</p>\n<h3 id=\"-프라이빗-키-파일을-통한-접속\" style=\"position:relative;\"><a href=\"#-%ED%94%84%EB%9D%BC%EC%9D%B4%EB%B9%97-%ED%82%A4-%ED%8C%8C%EC%9D%BC%EC%9D%84-%ED%86%B5%ED%95%9C-%EC%A0%91%EC%86%8D\" aria-label=\" 프라이빗 키 파일을 통한 접속 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>💪 프라이빗 키 파일을 통한 접속</h3>\n<p>인스턴스를 생서할때 다운받은 key 파일이 있을것이다.</p>\n<p>나는 C:\\Users\\leesu 해당 경로에 옮겨주었다.</p>\n<p>윈도우 사용자의 경우 해당 pem 파일의 권한을 수정해 줘야한다.</p>\n<p>권한 수정은 👉 <a href=\"https://chinsun9.github.io/2020/10/26/aws-ec2-keypair-%EC%84%A4%EC%A0%95/\">참고</a></p>\n<ol>\n<li>생성한 인스턴스를 체크하고 연결버튼 클릭</li>\n</ol>\n<p><img src=\"/06b23b1c79ac9ac8b986518b980fcab7/ec2connect2.png\" alt=\"ec2connect2.PNG\"></p>\n<ol start=\"2\">\n<li>SSH 클라이언트 클릭</li>\n</ol>\n<p><img src=\"/60760b2f092ce7c90b59b824c105daa6/ec2connect3.png\" alt=\"ec2connect3.PNG\"></p>\n<p>맨아래 예시의 명령어를 복사하여 커멘드 창에서 실행</p>\n<p><img src=\"/9673c09a5733c3acb11c187960b9bc16/ec2connect4.png\" alt=\"ec2connect4.PNG\"></p>\n<p>접속이 완료된걸 확인할수 있다.</p>\n<h3 id=\"-session-manager-활용하여-접속하기\" style=\"position:relative;\"><a href=\"#-session-manager-%ED%99%9C%EC%9A%A9%ED%95%98%EC%97%AC-%EC%A0%91%EC%86%8D%ED%95%98%EA%B8%B0\" aria-label=\" session manager 활용하여 접속하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>💪 Session Manager 활용하여 접속하기</h3>\n<p>EC2를 사용하다 보면 SSH Key 파일이 없는데 급하게 서버에 붙어야 하는 상황이 생기게 된다. AWS에서는 session manager 라는 기능을 제공하여 key 파일 없이 AWS console에서 EC2에 접속할 수 있도록 한다.</p>\n<p><a href=\"https://docs.aws.amazon.com/ko_kr/systems-manager/latest/userguide/session-manager.html\">session manager란?</a> 참고 바란다</p>\n<p>EC2의 우측 상단에 있는 연결 버튼을 클릭하여 인스턴스에 연결 화면으로 이동한다. Session Manager 탭을 클릭하면 연결 버튼이 활성화 되어 있는 경우 바로 연결 하면 되지만, 대부분의 경우 아래와 같이 비활성화가 되어있다.</p>\n<p><img src=\"/84da4bdd0a7c9aed845849859040abf7/ec2ssm1.png\" alt=\"ec2ssm1.PNG\"></p>\n<ol>\n<li>Session Manager(SSM) 사전 조건</li>\n</ol>\n<p>session manager 를 사용하기 위해서는 아래 조건을 만족해야 한다.</p>\n<ul>\n<li>\n<p>EC2 Role에 session manager 를 사용할 수 있는 권한이 포함되어야 한다.</p>\n</li>\n<li>\n<p>EC2에 session manager agent 가 설치되어야 한다. (AMI 사용시 session manage agent가 포함된 경우도 있지만, 아닌경우 수동으로 설치해야 한다.)</p>\n</li>\n<li>\n<p>EC2의 outbound에 443 포트가 any로 오픈 되어 있어야 한다. SSM은 443으로 EC2와 통신하기 때문에 443을 any로 열어주어야 접속 가능하다.</p>\n</li>\n</ul>\n<ol start=\"2\">\n<li>EC2 Role에 Session Manager 권한(정책) 추가하기</li>\n</ol>\n<p><img src=\"/bb6547713a277370fcef7952ff94a7cd/ec2ssm2.png\" alt=\"ec2ssm2.PNG\"></p>\n<p>인스턴스 선택 후 작업 – 보안 – IAM 역할 수정을 선택한다.</p>\n<p><img src=\"/631f1cdbcbd106883a9fc27dfb81230f/ec2ssm3.png\" alt=\"ec2ssm3.PNG\"></p>\n<p>새IAM 역할 생성을 클릭한다.</p>\n<p><img src=\"/d7a86d0046c83c115e358fc6b60ab903/ec2ssm4.png\" alt=\"ec2ssm4.PNG\"></p>\n<p>역할 만들기 클릭한다.</p>\n<p><img src=\"/4752eb9a110785a34ce45dca863d1d61/ec2ssm5.png\" alt=\"ec2ssm5.PNG\"></p>\n<p>ec2에 체크후 다음 클릭</p>\n<p><img src=\"/76057e1e4fdaf61ee1e18f7c1144950e/ec2ssm6.png\" alt=\"ec2ssm6.PNG\"></p>\n<p>해당 롤 검색하여 체크후 다음 클릭</p>\n<p><img src=\"/a0ce21ff9d08412ad9305bf9770437cf/ec2ssm7.png\" alt=\"ec2ssm7.PNG\"></p>\n<p>역할이름을 작성후 역할 생성해준다.</p>\n<p><img src=\"/2c6b02f7218603b59214f296ff032feb/ec2ssm8.png\" alt=\"ec2ssm8.PNG\"></p>\n<p>그다음 다시 인스턴스 선택 후 작업 -> 보안 -> IAM 역할 수정을 클릭해서</p>\n<p>방금 생성한 IAM 역할을 인스턴스에 붙인다. AmazonEC2RoleforSSM 정책은 SSM을 사용하기 위해 AWS에서 관리하는 관리형 정책이다.</p>\n<p>저장 클릭</p>\n<ol start=\"3\">\n<li>EC2 에 SSM Agent 설치하기</li>\n</ol>\n<p>ssh터널링을 통해 인스턴스에 접근하여</p>\n<p><a href=\"https://docs.aws.amazon.com/ko_kr/systems-manager/latest/userguide/sysman-manual-agent-install.html\">가이드 문서</a>를 참고하여 각자의 OS에 맞는 명령어를 수행한다.</p>\n<p>나의 경우 아래와 같이 설치를 하였다.</p>\n<p><img src=\"/f271532a6f6855afc8adbc9a258c8cda/ec2ssm9.png\" alt=\"ec2ssm9.PNG\"></p>\n<p>아래 명령어를 수행하여 ssm agent가 실행중인지 확인한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo systemctl status amazon-ssm-agent</code></pre></div>\n<p><img src=\"/9146d66f4735048fc1a7fe3e684280be/ec2ssm10.png\" alt=\"ec2ssm10.PNG\"></p>\n<p>상태가 active가 아닌 stoppted, inactive, disabled로 나오는 경우 아래 명령어를 실행하여 서비스를 시작한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo systemctl enable amazon-ssm-agent</code></pre></div>\n<ol start=\"4\">\n<li>EC2의 outbound rule에 443 추가하기</li>\n</ol>\n<p>EC2의 보안 그룹에 443 any Rule을 추가한다.</p>\n<p><img src=\"/0dcfb790db162237859f023b450b3868/ec2ssm11.png\" alt=\"ec2ssm11.PNG\"></p>\n<ol start=\"5\">\n<li>SSM을 활용하여 EC2에 연결하기</li>\n</ol>\n<p>위의 조건을 전부 만족하면 연결 버튼이 활성화 된다. 연결 버튼을 클릭하여 인스턴스에 접속한다.</p>\n<p><img src=\"/64a26ac4fb92102c30c5bf5e11626616/ec2ssm12.png\" alt=\"ec2ssm12.PNG\"></p>\n<p>Role을 먼저 추가한 후 agent를 설치해야 agent 서비스가 실행되면서 role 의 정책을 확인한다.</p>\n<p>위의 과정을 다 수행했는데도 제대로 연결이 되지 않는 경우 agnet를 재실행한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo systemctl restart amazon-ssm-agent</code></pre></div>\n<p>key 파일 없이도 EC2에 연결이 가능해졌다.</p>\n<p><img src=\"/14f9776d068119b8c92e59c8a55d7b30/ec2ssm13.png\" alt=\"ec2ssm13.PNG\"></p>\n<p>아래 명령어를 수행하여 SSH 접속과 동일하게 원하는 사용자로 변경하여 사용가능하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo su - {user명}</code></pre></div>\n<p>이렇게 연결되는 세션은 AWS의 System Manager 서비스에서 조회 및 관리가 가능하다.</p>\n<h2 id=\"마무리\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"마무리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🌭마무리</h2>\n<p>이상으로 EC2 인스턴스에 접속하는 방법에 대해 알아보았습니다.\n개발할때 세션 메니저를 통한 접속이 편하니 인프라팀에게 무조건 해달라고해라…</p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#-ec2-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4-%EC%83%9D%EC%84%B1%ED%95%98%EA%B8%B0\">🎈 EC2 인스턴스 생성하기</a></p>\n<ul>\n<li><a href=\"#-%ED%94%84%EB%9D%BC%EC%9D%B4%EB%B9%97-%ED%82%A4-%ED%8C%8C%EC%9D%BC%EC%9D%84-%ED%86%B5%ED%95%9C-%EC%A0%91%EC%86%8D\">💪 프라이빗 키 파일을 통한 접속</a></li>\n<li><a href=\"#-session-manager-%ED%99%9C%EC%9A%A9%ED%95%98%EC%97%AC-%EC%A0%91%EC%86%8D%ED%95%98%EA%B8%B0\">💪 Session Manager 활용하여 접속하기</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\">🌭마무리</a></p>\n</li>\n</ul>\n</div>","excerpt":"🎈 EC2 인스턴스 생성하기 먼저 테스트를 위해 인스턴스를 하나 생성 합니다. 🙏 ec2 생성방법은 링크를 참고해주세요! 해주세요~! ec2connect1.PNG 나는 이렇게 conect라는 이름으로 생성해주었다 💪 프라이빗 키 파일을 통한 접속 인스턴스를 생서할때 다운받은 key 파일이 있을것이다. 나는 C:\\Users\\leesu 해당 경로에 옮겨주었다. 윈도우 사용자의 경우 해당 pem 파일의 권한을 수정해 줘야한다. 권한 수정은 👉 참고 생성한 인스턴스를 체크하고 연결버튼 클릭 ec2connect2.PNG SSH 클라이언트 클릭 ec2connect3.PNG 맨아래 예시의 명령어를 복사하여 커멘드 창에서 실행 ec2connect4.PNG 접속이 완료된걸 확인할수 있다. 💪 Session Manager 활용하여 접속하기 EC2를 사용하다 보면 SSH Key 파일이 없는데 급하게 서버에 붙어야 하는 상황이 생기게 된다. AWS에서는 session manager 라는 기능을 제공하여…","frontmatter":{"date":"March 03, 2022","title":"AWS EC2 접속 방법","categories":"AWS","author":"쩡기","emoji":"🎟"},"fields":{"slug":"/gatsby-aws-study-ec2-conect-tuto/"}},"next":{"id":"28d3225d-e5e8-5811-956c-43226d908e00","html":"<h2 id=\"-ec2-인스턴스-생성하기\" style=\"position:relative;\"><a href=\"#-ec2-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4-%EC%83%9D%EC%84%B1%ED%95%98%EA%B8%B0\" aria-label=\" ec2 인스턴스 생성하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🎈 EC2 인스턴스 생성하기</h2>\n<p>EC2 서비스에서 생성한 가상 서버를 인스턴스라 합니다.</p>\n<p>서버를 켜고 끄는것은 인스턴스를 실행하고 종료한다는 의미와 같습니다.</p>\n<ol>\n<li>인스턴스 시작</li>\n</ol>\n<p><img src=\"/88033dc2c591de90e90ef2eebb58f71a/ec21.png\" alt=\"ec21.PNG\"></p>\n<p>우측 상단에 region을 서울로 선택하고, “인스턴스 시작” 버튼을 클릭합니다.\n아래의 각 단계마다 ”?”아이콘 또는 링크에 자세한 공식문서 설명이 있으므로, 공식문서를 꼭 참고하시길 바랍니다.</p>\n<ol start=\"2\">\n<li>AMI 선택</li>\n</ol>\n<p><img src=\"/4575f6b34332d1542eff1f3798a89f7a/ec22.png\" alt=\"ec22.PNG\"></p>\n<p>보시는 이미지들은 AWS에서 제공하는 이미지들입니다.</p>\n<p>AMI는 서버에 필요한 운영체제와 여러 소프트웨어들이 적절히 구성된 상태로 제공되는 템플릿으로서, 이미지를 통해 인스턴스를 쉽게 만들 수 있습니다.</p>\n<p>여기서는 “Amazon Linux 2 AMI (HVM), SSD Volume Type” 인스턴스를 선택합니다.</p>\n<p>Amazon Linux 2는 차세대 Amazon Linux 운영 체제로, 현대식 애플리케이션 환경에 Linux 커뮤니티의 최신 향상 기능과 함께 장기적인 지원을 제공한다고 합니다.</p>\n<ol start=\"3\">\n<li>인스턴스 유형 선택</li>\n</ol>\n<p><img src=\"/39b97bb3e08fe650d839643b5e7ef69f/ec23.png\" alt=\"ec23.PNG\"></p>\n<p>사용목적에 따라 CPU, 메모리 등을 선택하여 인스턴스를 생성할 수 있습니다.</p>\n<p>저는 프리티어를 사용할 것이므로 프리티어에 체크 후, 다음으로 넘어갑니다.</p>\n<ol start=\"4\">\n<li>인스턴스 세부 정보 구성</li>\n</ol>\n<p><img src=\"/39fe7632da518008a93e16ab61f462e0/ec24.png\" alt=\"ec24.PNG\"></p>\n<p>세부 구성을 설정합니다.</p>\n<p>모두 기본값으로 설정해도 무방합니다.</p>\n<ol start=\"5\">\n<li>스토리지 추가</li>\n</ol>\n<p><img src=\"/288740ecb26b1e25bd773e67df65831d/ec25.png\" alt=\"ec25.PNG\"></p>\n<p>인스턴스의 스토리지를 설정합니다.</p>\n<p>Root 장치는 꼭 있어야 합니다.</p>\n<p>또한 볼륨 유형에 따라 비용의 차이가 있는데, 여기서는 기본 값인 범용 SSD를 선택합니다.</p>\n<p>모두 기본값으로 설정하고 넘어가도 무방합니다.</p>\n<ol start=\"6\">\n<li>태그 추가</li>\n</ol>\n<p><img src=\"/1e3c7ee0f04fb75dc33b0b68a2a7a89a/ec26.png\" alt=\"ec26.PNG\"></p>\n<p>고유의 메타데이터를 태그의 형태로 각 리소스에 배정하면 인스턴스, 이미지 및 기타 EC2 리소스를 쉽게 관리할 수 있는 태그를 설정합니다.</p>\n<p>굳이 설정하지 않고 넘어가도 무방합니다.</p>\n<ol start=\"7\">\n<li>보안 그룹 구성</li>\n</ol>\n<p><img src=\"/dd1a11053660f0b409d97b20d3da633c/ec27.png\" alt=\"ec27.PNG\"></p>\n<p>인스턴스에 대한 트래픽을 제어하는 방화벽을 설정합니다.</p>\n<p>인스턴스는 가상머신이므로 터미널을 통해 접속해야 하기 때문에, SSH 22번 포트만 기본값으로 작성되어있는 상태입니다.</p>\n<p>추가적으로 방화벽 오픈이 필요하다면 입력해주시면 됩니다.</p>\n<p>웹 서버로 활용되면 HTTP(80) / HTTPS(443) 정도 추가해줘도 좋을것 같습니다.</p>\n<ol start=\"8\">\n<li>인스턴스 시작 검토</li>\n</ol>\n<p>적용 사항을 확인하고 “시작”버튼을 클릭합니다.</p>\n<ol start=\"9\">\n<li>키 페어 선택/생성</li>\n</ol>\n<p><img src=\"/9fc05684b1bb591bd49b53f011b2d533/ec28.png\" alt=\"ec28.PNG\"></p>\n<p>키 페어(key pair)는 SSH 터미널로 인스턴스에 접근할 때 꼭 필요한 파일입니다.</p>\n<p>외부에 노출되어서도 안되며, 잃어버려서도 안되기 때문에 개인이 꼭!! 잘 보관하고 있어야 합니다.</p>\n<p>키 쌍을 다운받고 “인스턴스 시작”을 눌러서 인스턴스를 시작합니다.</p>\n<ol start=\"10\">\n<li>인스턴스 확인</li>\n</ol>\n<p><img src=\"/f14f55c2d36d4cf061d15e7a7e6f42f5/ec29.png\" alt=\"ec29.PNG\"></p>\n<p>이와 같이 “실행중” 상태가 됩니다.</p>\n<h2 id=\"마무리\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"마무리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🌭마무리</h2>\n<p>이상으로 EC2 인스턴스를 생성하는 방법에 대해 알아보았습니다.</p>\n<p>출처: <a href=\"https://victorydntmd.tistory.com/61\">https://victorydntmd.tistory.com/61</a></p>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#-ec2-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4-%EC%83%9D%EC%84%B1%ED%95%98%EA%B8%B0\">🎈 EC2 인스턴스 생성하기</a></li>\n<li><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\">🌭마무리</a></li>\n</ul>\n</div>","frontmatter":{"date":"March 03, 2022","title":"AWS EC2 생성","categories":"AWS","author":"쩡기","emoji":"🎟"},"fields":{"slug":"/gatsby-aws-study-ec2-tuto/"}},"prev":{"id":"04c8a1c4-c250-5781-a114-87fcb2e921d2","html":"<h2 id=\"-개요\" style=\"position:relative;\"><a href=\"#-%EA%B0%9C%EC%9A%94\" aria-label=\" 개요 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✅ 개요</h2>\n<p>RDS를 생성하여 사용할때 외부에서의 접근을 허용하면 보안상의 약점이 생긴다.</p>\n<p>이를 방지하기 위해 외부에서의 접근을 제한하는데</p>\n<p>그렇다면 개발자가 어떻게 RDS에 접근을 할수 있을까?</p>\n<p>방법은 EC2를 통한 접근이다.</p>\n<p>이번 시간에는 비공개 RDS를 생성하여 EC2에서 접근하는 방법을 알아보자.\n<br></p>\n<h3 id=\"-rds-를-외부에-노출-시키지-않는-이유\" style=\"position:relative;\"><a href=\"#-rds-%EB%A5%BC-%EC%99%B8%EB%B6%80%EC%97%90-%EB%85%B8%EC%B6%9C-%EC%8B%9C%ED%82%A4%EC%A7%80-%EC%95%8A%EB%8A%94-%EC%9D%B4%EC%9C%A0\" aria-label=\" rds 를 외부에 노출 시키지 않는 이유 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🔒 RDS 를 외부에 노출 시키지 않는 이유</h3>\n<p>가장 큰 문제는 보안이다.</p>\n<p>DB에 모든 정보들이 담겨져 있는 공간인데, 이것이 외부 네트워크에 노출이 되어 있으면 보안에 상당히 취약할 것.</p>\n<p>그래서 VPC안에 있는 EC2를 통해서만 접속하게 하는것 이다.</p>\n<p>또한 애플리케이션 서버 또한 안전하게 RDS에 접속할 수 있다는 장점이 있다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 710px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 84.44444444444446%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABc0lEQVQ4y6WTbW+bMBCA8///WD5ESxfRrkRCyYood2dssA1E4NeJktIkbTZpfWQh646HO7+wit9gdS8Rwnn8Qw5fcfGVu9yt/PtleHrukdm5i7uVlVJExK55/FUkSfGcvrKvQEQhxCQDgLXWveO9d86F4GL0IUxze41zzhgDAJNMRMsi51e993/fZ+89Y+xKTtN0u92u1+s8z+fI/BzHEQCSJNntdvv93r9BRCvvPQDEGEUtGeNKSc5513WMsVmWckAkKRtEBAAiAoAQwiSXZZmmaYzx4eexBBljMMZYaxGxaSbhx0OOyJYuZu1ceW47xng6nYhIKa2UqqqqaZplecfjMcsyKWVd10IIRDxXjjEi4jAMzrm+79u27d64vCfGmL7v53jbttbaD/lwOGw2myzLuq5b2vPeF0WR53lZllrrJX6724g4jqO11lwwjqMQoqoqzrnW+iY7DMP5nLXWRFR9on6Hc36TIqKmaVbf/SXD//IHF6TV6HrjcVMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"ec2RDS.png\"\n        title=\"ec2RDS.png\"\n        src=\"/static/5e4f51c91fbbe15ed8b4bc44f4409f1e/7131f/ec2RDS.png\"\n        srcset=\"/static/5e4f51c91fbbe15ed8b4bc44f4409f1e/e9ff0/ec2RDS.png 180w,\n/static/5e4f51c91fbbe15ed8b4bc44f4409f1e/f21e7/ec2RDS.png 360w,\n/static/5e4f51c91fbbe15ed8b4bc44f4409f1e/7131f/ec2RDS.png 710w\"\n        sizes=\"(max-width: 710px) 100vw, 710px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>위의 그림과 같이 SSH를 통해 EC2에 접속하고, EC2에서만 RDS로 접속할 수 있게 네트워크 구성을 한다 <a href=\"https://aws.amazon.com/ko/premiumsupport/knowledge-center/rds-connect-ec2-bastion-host/\">참고</a></p>\n<h3 id=\"-ec2-인스턴스-시작-및-구성\" style=\"position:relative;\"><a href=\"#-ec2-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4-%EC%8B%9C%EC%9E%91-%EB%B0%8F-%EA%B5%AC%EC%84%B1\" aria-label=\" ec2 인스턴스 시작 및 구성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🦄 EC2 인스턴스 시작 및 구성</h3>\n<ol>\n<li>EC2 인스턴스 생성</li>\n</ol>\n<p>일단 기본적으로 인스턴스를 생성 해야한다.</p>\n<blockquote>\n<p>🎈 RDS <a href=\"https://leesungki.github.io/gatsby-aws-study-aws-rds-conection-mySQL/\">생성방법</a></p>\n</blockquote>\n<blockquote>\n<p>👓 EC2 <a href=\"https://leesungki.github.io/gatsby-aws-study-ec2-tuto/\">생성방법</a></p>\n</blockquote>\n<p>생성 중에 Network(네트워크)]에서 RDS DB 인스턴스가 사용하는 VPC를 선택합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 656px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 35%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABJ0AAASdAHeZh94AAABVklEQVQoz12R227bMBBE9f//VfQhBZr2KU0dubJk3UiKFCmRulg8hWkHKEpgOLPYnX2YzaSUDHpEa421DqU0ou9TbbTm88UYOY7IEf/B8Z8+IlmlF/JWk7eGczdykY5Sb+Ry5SwDH/WQeo3dED7Sz0eCmGOqxV37h5Y+krWDo2wll1bSqJFaGGo5clWOsjeUneIqDJ12dHpCWo+yHmEm2sHS31nZh0cYstu+sa0r+7axhIAQPUYPLGHG2pHgPSF4JueYnEVpSytHOjkiB8O2Lskf/Jxms2dADxCTaVCK276zLgvOOay1hBA4juOZ233ygc//mTSZ8Ttj2LmzXQ567ShqgZ5Wqk7y6+MP73nB7/xC1XQJZd1SVA1lI1BuRboVPT/2ZO10Y1hAhZi4dxu18Um/nSu+vHzn67dXXn6+8fp+5cep4VQJilZyqjrqcaMYtnSoYYn8BdTbFs3KTZaIAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"ec2RDS1.png\"\n        title=\"ec2RDS1.png\"\n        src=\"/static/abfb81fefbfef418dabbf9c60c1a7c88/748f4/ec2RDS1.png\"\n        srcset=\"/static/abfb81fefbfef418dabbf9c60c1a7c88/e9ff0/ec2RDS1.png 180w,\n/static/abfb81fefbfef418dabbf9c60c1a7c88/f21e7/ec2RDS1.png 360w,\n/static/abfb81fefbfef418dabbf9c60c1a7c88/748f4/ec2RDS1.png 656w\"\n        sizes=\"(max-width: 656px) 100vw, 656px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>나의 경우 위와같은 VPC를 사용한다.</p>\n<p>보안 그룹 구성 에서 아래와 같이</p>\n<ul>\n<li>Type(유형): 사용자 지정 TCP 규칙</li>\n<li>Protocol(프로토콜): TCP</li>\n<li>포트 범위: 22</li>\n<li>Source(소스): 로컬 시스템의 IP 주소를 입력합니다. 기본적으로 소스 IP 주소는 모두에게 개방되어 있습니다. 하지만 로컬 퍼블릭 IP 주소에 대해서만 허용하도록 액세스를 제한할 수 있습니다.</li>\n</ul>\n<p><img src=\"/02fc57909e372c97ae17c7b5261bf9e8/ec2RDS2.png\" alt=\"ec2RDS2.PNG\"></p>\n<p>그후 인스턴스 생성을 완료해 줍니다.\n나의 경우 아래처럼 생성하였다.\n<img src=\"/7078b93c8f72b5700c2a99e27b87c824/ec2RDS3.png\" alt=\"ec2RDS3.PNG\"></p>\n<ol start=\"2\">\n<li>RDS DB 인스턴스의 보안 그룹 구성</li>\n</ol>\n<p>Amazon RDS 콘솔을 열고\nRDS DB 인스턴스의 이름을 선택합니다.</p>\n<p>나는 미리 private한 RDS를 생성해놨다.</p>\n<p>연결 및 보안 탭을 선택</p>\n<p><img src=\"/25abdb3f4f512fbf8090b55d35393536/ec2RDS4.png\" alt=\"ec2RDS4.PNG\"></p>\n<p>보안 섹션에서 VPC 보안 그룹 아래의 링크를 선택 (나는 FlaskDB를 선택했다.)</p>\n<p>보안 그룹을 선택하고 작업을 선택한 다음 인바운드 규칙 편집을 선택합니다.</p>\n<p>규칙 추가를 선택하고 다음을 입력합니다.</p>\n<ul>\n<li>Type(유형): 사용자 지정 TCP 규칙</li>\n<li>Protocol(프로토콜): TCP</li>\n<li>Port Range(포트 범위): RDS DB 인스턴스의 포트를 입력합니다.</li>\n<li>Source(소스): EC2 인스턴스의 프라이빗 IP 주소를 입력합니다.</li>\n</ul>\n<p>저장 클릭.</p>\n<p>다하면 아래처럼 내가 추가한 규칙이 보입니다.</p>\n<p><img src=\"/fb03aa81a24b60cfcf0a6721432d7ee8/ec2RDS5.png\" alt=\"ec2RDS5.PNG\"></p>\n<h2 id=\"-마무리\" style=\"position:relative;\"><a href=\"#-%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\" 마무리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🎨 마무리</h2>\n<p>이렇게 보안을 강화하기 위해 EC2를 통해 RDS 에 접근 할수있게 구성을 해줬다.</p>\n<p>그럼 개발자가 개발시에 비공개 RDS에 접근하려면 어떻게 해야할까?</p>\n<p>다음에는 그에대한 포스팅을 해볼 예정이다.</p>\n<br>\n<br>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#-%EA%B0%9C%EC%9A%94\">✅ 개요</a></p>\n<ul>\n<li><a href=\"#-rds-%EB%A5%BC-%EC%99%B8%EB%B6%80%EC%97%90-%EB%85%B8%EC%B6%9C-%EC%8B%9C%ED%82%A4%EC%A7%80-%EC%95%8A%EB%8A%94-%EC%9D%B4%EC%9C%A0\">🔒 RDS 를 외부에 노출 시키지 않는 이유</a></li>\n<li><a href=\"#-ec2-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4-%EC%8B%9C%EC%9E%91-%EB%B0%8F-%EA%B5%AC%EC%84%B1\">🦄 EC2 인스턴스 시작 및 구성</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-%EB%A7%88%EB%AC%B4%EB%A6%AC\">🎨 마무리</a></p>\n</li>\n</ul>\n</div>","frontmatter":{"date":"March 03, 2022","title":"AWS RDS Private + EC2 연결","categories":"AWS","author":"쩡기","emoji":"💡"},"fields":{"slug":"/gatsby-aws-study-rds-private/"}},"site":{"siteMetadata":{"siteUrl":"https://leesungki.github.io","comments":{"utterances":{"repo":"LeeSungKi/leesungki.github.io"}}}}},"pageContext":{"slug":"/gatsby-aws-study-ec2-conect-tuto/","nextSlug":"/gatsby-aws-study-ec2-tuto/","prevSlug":"/gatsby-aws-study-rds-private/"}},
    "staticQueryHashes": ["1073350324","1956554647","2938748437"]}