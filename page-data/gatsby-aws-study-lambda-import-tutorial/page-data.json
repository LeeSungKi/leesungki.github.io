{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/gatsby-aws-study-lambda-import-tutorial/",
    "result": {"data":{"cur":{"id":"d5df6734-1237-5410-92ff-773a1a6ee0f9","html":"<h2 id=\"-lambda-layersì˜-í•µì‹¬\" style=\"position:relative;\"><a href=\"#-lambda-layers%EC%9D%98-%ED%95%B5%EC%8B%AC\" aria-label=\" lambda layersì˜ í•µì‹¬ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸˆ Lambda Layersì˜ í•µì‹¬?</h2>\n<p><strong>â€œLambdaì— ì½”ë“œ ë§Œë“¤ì–´ ì˜¬ë¦´ ë•Œ ë§¤ë²ˆ íŒ¨í‚¤ì§€(pip íŒ¨í‚¤ì§€ ë“±) ì„¸íŠ¸ ë§Œë“¤ì–´ ì˜¬ë¦¬ëŠ”ê±° ê·€ì°®ì•˜ì§€? ê°™ì€ Dependency ê°€ì§€ëŠ” í•¨ìˆ˜ë¼ë©´ ì½”ë“œë§Œ ë”°ë¡œ ë¹¼ê³  ì˜ì¡´ì„± íŒ¨í‚¤ì§€ëŠ” Layersë¼ëŠ” ê³³ìœ¼ë¡œ ë¹¼ì„œ ì‚¬ìš©í•´!â€</strong></p>\n<p>ì¦‰, êµ‰ì¥íˆ í¸ë¦¬í•´ì§„ ìš”ì†Œê°€ ì¶”ê°€ëœ ê²ƒì´ì£ . ê·¸ë ‡ë‹¤ë©´ LayersëŠ” ì–´ë–»ê²Œ ë™ì‘í• ê¹Œìš”?</p>\n<blockquote>\n<p>âœ… ëŒë‹¤ ì‚¬ìš©ì„ ìœ„í•´ ê°„ë‹¨í•œ ì˜ˆì œë¥¼ í†µí•œ ì‹¤ìŠµì„ í•´ë³´ì.</p>\n</blockquote>\n<h2 id=\"íŠœí† ë¦¬ì–¼\" style=\"position:relative;\"><a href=\"#%ED%8A%9C%ED%86%A0%EB%A6%AC%EC%96%BC\" aria-label=\"íŠœí† ë¦¬ì–¼ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ•íŠœí† ë¦¬ì–¼</h2>\n<h3 id=\"lambda-layersëŠ”-ì–´ë–»ê²Œ-ì‚¬ìš©í•˜ë‚˜ìš”\" style=\"position:relative;\"><a href=\"#lambda-layers%EB%8A%94-%EC%96%B4%EB%96%BB%EA%B2%8C-%EC%82%AC%EC%9A%A9%ED%95%98%EB%82%98%EC%9A%94\" aria-label=\"lambda layersëŠ” ì–´ë–»ê²Œ ì‚¬ìš©í•˜ë‚˜ìš” permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Lambda LayersëŠ” ì–´ë–»ê²Œ ì‚¬ìš©í•˜ë‚˜ìš”?</h3>\n<h3>Lambda í•¨ìˆ˜ë¡œ ë§Œë“¤ ì½”ë“œ ì‘ì„±í•˜ê¸°</h3>\n<p>ì•„ì£¼ì•„ì£¼ ê°„ë‹¨í•˜ê³  ì‹¬í”Œí•œ í¬ë¡¤ë§ ì½”ë“œë¥¼ Lambdaì— ì˜¬ë ¤ ì‚¬ìš©í•œë‹¤ê³  ê°€ì •í•´ë´…ì‹œë‹¤. í•´ë‹¹ ì½”ë“œëŠ” requestsì™€ bs4ë¼ëŠ” ëª¨ë“ˆì„ ì‚¬ìš©í•©ë‹ˆë‹¤.\r\nì´ ë¸”ë¡œê·¸ë¥¼ ê¸ì–´ h1íƒœê·¸ í•˜ë‚˜ì˜ ê¸€ìë¥¼ ê°€ì ¸ì™€ë´…ì‹œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"py\"><pre class=\"language-py\"><code class=\"language-py\"><span class=\"token keyword\">import</span> json\r\n<span class=\"token keyword\">import</span> requests\r\n\r\n<span class=\"token keyword\">from</span> bs4 <span class=\"token keyword\">import</span> BeautifulSoup <span class=\"token keyword\">as</span> bs\r\n\r\n<span class=\"token keyword\">def</span> <span class=\"token function\">lambda_handler</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n    <span class=\"token comment\"># TODO implement</span>\r\n    res <span class=\"token operator\">=</span> requests<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'https://github.com/LeeSungKi'</span><span class=\"token punctuation\">)</span>\r\n    soup <span class=\"token operator\">=</span> bs<span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">,</span> <span class=\"token string\">'html.parser'</span><span class=\"token punctuation\">)</span>\r\n    blog_title <span class=\"token operator\">=</span> soup<span class=\"token punctuation\">.</span>select_one<span class=\"token punctuation\">(</span><span class=\"token string\">'h1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>text\r\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token string\">'statusCode'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">200</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token string\">'body'</span><span class=\"token punctuation\">:</span> json<span class=\"token punctuation\">.</span>dumps<span class=\"token punctuation\">(</span>blog_title<span class=\"token punctuation\">)</span>\r\n    <span class=\"token punctuation\">}</span></code></pre></div>\n<p>í•˜ì§€ë§Œ ì•„ë¬´ëŸ° ì¤€ë¹„ ì—†ì´ AWS Lambda ì½˜ì†”ì—ì„œ ìœ„ ì½”ë“œë¥¼ ì €ì¥í•˜ê³  ì‹¤í–‰í•˜ë©´ ì•„ë˜ì™€ ê°™ì€ No module named â€˜requestsâ€™ ì—ëŸ¬ê°€ ë‚©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Response:\r\n{\r\n  \"errorMessage\": \"Unable to import module 'lambda_function'\"\r\n}\r\n\r\n...\r\n\r\nUnable to import module 'lambda_function': No module named 'requests'</code></pre></div>\n<p>ìœ„ ì—ëŸ¬ ë©”ì‹œì§€ëŠ” requestsë¼ëŠ” ëª¨ë“ˆì„ ì°¾ì„ ìˆ˜ ì—†ë‹¤ëŠ” íŒŒì´ì¬ ì—ëŸ¬ì…ë‹ˆë‹¤. ë‹¹ì—°íˆ ì„¤ì¹˜ë˜ì–´ìˆì§€ ì•Šê¸° ë•Œë¬¸ì— ì—ëŸ¬ê°€ ë°œìƒí•©ë‹ˆë‹¤. Lambda Layersë¥¼ ì´ìš©í•´ ì´ ì´ìŠˆë¥¼ í•´ê²°í•´ë´…ì‹œë‹¤.</p>\n<h3>í¬ë¡¤ë§ ì˜ì¡´ íŒ¨í‚¤ì§€ë“¤ Lambda Layersë¡œ ë§Œë“¤ê¸°</h3>\n<p>ì´ì œ AWS Lambda Consoleì„ ì¼œ ì¤ì‹œë‹¤. Lambda ì„œë¹„ìŠ¤ í•­ëª© ì¤‘ â€œê³„ì¸µâ€ í˜¹ì€ Layersë¥¼ ëˆ„ë¥´ê³  â€œê³„ì¸µ ìƒì„±â€ì„ ëˆŒëŸ¬ì¤ì‹œë‹¤.</p>\n<p><img src=\"/463e22d35d47026d5c0e64cf5f8545ef/layers1.png\" alt=\"layers1.PNG\"></p>\n<p>ì•„ë˜ì™€ ê°™ì´ ìƒˆë¡œìš´ Lambda Layerë¥¼ ìƒì„±í•˜ëŠ” ì°½ì´ ëœ¹ë‹ˆë‹¤.</p>\n<p><img src=\"/153ff4068a8edb6d223f74faa2ae1e0c/layers2.png\" alt=\"layers2.PNG\"></p>\n<p>ì´ì œ requestsì™€ bs4ê°€ ë“¤ì–´ìˆëŠ” zip ì••ì¶•íŒŒì¼ì„ ì—…ë¡œë“œí•´ì•¼ í•˜ëŠ”ë°ìš”, í¬ë¡¤ë§ì„ ìœ„í•œ íŒ¨í‚¤ì§€ê°€ ì•„ë˜ Github Repoì— ì¤€ë¹„ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì•„ë˜ Direct Download ë§í¬ë¥¼ í†µí•´ pack.zipíŒŒì¼ì„ ë°›ì•„ ì—…ë¡œë“œ í•´ì£¼ì„¸ìš”.</p>\n<blockquote>\n<p>Github Repo: <a href=\"https://github.com/LeeSungKi/OpenSearchApp/blob/main/pack.zip\">https://github.com/LeeSungKi/OpenSearchApp/blob/main/pack.zip</a></p>\n</blockquote>\n<ul>\n<li>requests + bs4 + lxml + requests_aws4auth</li>\n</ul>\n<p>ê·¸ë¦¬ê³  Runtimeìœ¼ë¡œ python3.7/python3.8ë¥¼ ì„ íƒí•´ ì¤ì‹œë‹¤. (ì—¬ëŸ¬ë¶„ì´ Layerë¥¼ ë§Œë“¤ë•ŒëŠ” í•´ë‹¹ Layerê°€ ì‚¬ìš©ë  í™˜ê²½ì„ ëª¨ë‘ ì„ íƒí•´ì£¼ì„¸ìš”.)</p>\n<p>ì—…ë¡œë“œê°€ ì„±ê³µí•˜ë©´ ì•„ë˜ì™€ ê°™ì´ ìƒˆë¡œìš´ Lambda Layerê°€ ìƒì„±ë©ë‹ˆë‹¤. ì°¸ê³ ë¡œ ê°ê°ì˜ LayerëŠ” ë²„ì „ë³„ë¡œ ìˆ˜ì •ì´ ë¶ˆê°€ëŠ¥í•˜ê³  ë§Œì•½ ìˆ˜ì •ì´ í•„ìš”í•˜ë‹¤ë©´ zipíŒŒì¼ì„ ë‹¤ì‹œ ì˜¬ë¦¬ê³  ìƒˆë¡œìš´ ë¦¬ë¹„ì „ì´ ìƒì„±ë©ë‹ˆë‹¤.</p>\n<p><img src=\"/c73ceb1547312f5ea1d0f59c6bfdfb03/layers3.png\" alt=\"layers3.PNG\"></p>\n<h3>Lambda Function ìƒì„± + Layers ë¶™ì´ê¸°</h3>\n<p>ë‚´ê°€ ë§Œë“¤ì–´ë†“ì€ testLayer ë¼ëŠ” ëŒë‹¤ì— layersë¥¼ ì¶”ê°€í•´ ë³´ê² ë‹¤.</p>\n<p>ìƒì„±í•œ ëŒë‹¤ì— ë“¤ì–´ê°€ë©´ ì•„ë˜ì— ê³„ì¸µì´ë¼ëŠ” ë¶€ë¶„ì— Add A Layer í´ë¦­í•œë‹¤.</p>\n<p><img src=\"/c4fd070af2e6b4772082dcacf3864dab/layers4.png\" alt=\"layers4.PNG\"></p>\n<p>ì•„ë˜ì™€ ê°™ì´ ë‚´ê°€ ë§Œë“  ê³„ì¸µì„ ì¶”ê°€í•´ ì¤€ë‹¤.</p>\n<p><img src=\"/35ba1b1b0cc212bc47ed83f7bdced859/layers5.png\" alt=\"layers5.PNG\"></p>\n<p>ì•„ë˜ì™€ ê°™ì´ Layersê°€ ì¶”ê°€ëœê±¸ í™•ì¸ í• ìˆ˜ ìˆë‹¤.</p>\n<p><img src=\"/2813dfea7f1e7b6e1b75b0b32e0e8bbc/layers6.png\" alt=\"layers6.PNG\"></p>\n<p>ì´ì œ Test ë²„íŠ¼ì„ ëˆŒëŸ¬ë³´ì</p>\n<p>ì•„ë˜ì²˜ëŸ¼ ì—ëŸ¬ì—†ì´ í¬ë¡¤ë§ ë˜ëŠ”ê²ƒì„ ì•Œìˆ˜ ìˆë‹¤.</p>\n<p><img src=\"/81ea7134e65711c44e130ee6fe3286a0/layers7.png\" alt=\"layers7.PNG\"></p>\n<p>íŒŒì´ì¬ì€ ê¸°ë³¸ì ìœ¼ë¡œ í˜„ì¬ í´ë”, ê·¸ë¦¬ê³  ì‹¤í–‰í•˜ëŠ” íŒŒì´ì¬ì´ ì°¸ê³ í•˜ëŠ” PYTHON PATHë“¤ì„ ì°¸ê³ í•´ ì—¬ëŸ¬ íŒ¨í‚¤ì§€ì™€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ importí•©ë‹ˆë‹¤.\r\nLambda Layersê°€ ì••ì¶• í•´ì œëœ /optí´ë”ëŠ” í•´ë‹¹ PATHì— ë“¤ì–´ìˆì§€ ì•Šì•„ importí•  ë•Œ Pythonì´ íƒìƒ‰í•˜ëŠ” ëŒ€ìƒì— í¬í•¨ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\r\nëŒ€ì‹ , ìš°ë¦¬ê°€ ë°©ê¸ˆ ë‹¤ìš´ë°›ì€ íŒ¨í‚¤ì§€ì§€ ì•ˆì˜ python í´ë”ê°€ /opt/pythonì— ì••ì¶•ì´ í•´ì œë˜ê³  í•´ë‹¹ í´ë”ëŠ” PYTHONPATH í™˜ê²½ë³€ìˆ˜ ë‚´ì— í¬í•¨ë˜ê²Œ ë©ë‹ˆë‹¤.</p>\n<h3 id=\"ë§ˆë¬´ë¦¬\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"ë§ˆë¬´ë¦¬ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸŒ­ë§ˆë¬´ë¦¬</h3>\n<p>ì´ë²ˆ ê¸€ì—ì„œëŠ” êµ‰ì¥íˆ ê°€ë²¼ìš´ íŒ¨í‚¤ì§€ë“¤ë§Œ ì‚¬ìš©í–ˆì§€ë§Œ</p>\n<p>AWS Lambdaì˜ â€˜250MBâ€™ í¬ê¸° ì œì•½ì€ ì—¬ì „íˆ â€œí•œ í•¨ìˆ˜ì˜ ì†ŒìŠ¤ì½”ë“œ í¬ê¸° + Layers í¬ê¸° í•©â€ìœ¼ë¡œ ë˜ì–´ìˆê¸° ë•Œë¬¸ì— Layerë¥¼ ìª¼ê°œë”ë¼ë„ ì´ í•©ì´ â€˜250MBâ€™ë¡œ ê±¸ë¦°ë‹¤ëŠ” ì ì€ ì•„ì‰½ìŠµë‹ˆë‹¤.</p>\n<p>ë‹¤ë§Œ ì¼ìƒì ì¸ ìˆ˜ì •ì´ í•„ìš”í•œ ê²½ìš°, ê·¸ë¦¬ê³  Proof of concept ê°™ì€ ìƒí™©ì—ì„œ Lambda í™˜ê²½ì„ í…ŒìŠ¤íŠ¸í•˜ê¸° ìœ„í•´ì„œëŠ” ì´ ê¸€ì—ì„œ ì†Œê°œí•œ AWS Lambda Layersë¥¼ ì ê·¹ í™œìš©í•´ ë³´ëŠ” ê²ƒì´ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.</p>\n<br>\r\n<br>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#-lambda-layers%EC%9D%98-%ED%95%B5%EC%8B%AC\">ğŸˆ Lambda Layersì˜ í•µì‹¬?</a></p>\n</li>\n<li>\n<p><a href=\"#%ED%8A%9C%ED%86%A0%EB%A6%AC%EC%96%BC\">ğŸ•íŠœí† ë¦¬ì–¼</a></p>\n<ul>\n<li><a href=\"#lambda-layers%EB%8A%94-%EC%96%B4%EB%96%BB%EA%B2%8C-%EC%82%AC%EC%9A%A9%ED%95%98%EB%82%98%EC%9A%94\">Lambda LayersëŠ” ì–´ë–»ê²Œ ì‚¬ìš©í•˜ë‚˜ìš”?</a></li>\n<li><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\">ğŸŒ­ë§ˆë¬´ë¦¬</a></li>\n</ul>\n</li>\n</ul>\n</div>","excerpt":"ğŸˆ Lambda Layersì˜ í•µì‹¬? â€œLambdaì— ì½”ë“œ ë§Œë“¤ì–´ ì˜¬ë¦´ ë•Œ ë§¤ë²ˆ íŒ¨í‚¤ì§€(pip íŒ¨í‚¤ì§€ ë“±) ì„¸íŠ¸ ë§Œë“¤ì–´ ì˜¬ë¦¬ëŠ”ê±° ê·€ì°®ì•˜ì§€? ê°™ì€ Dependency ê°€ì§€ëŠ” í•¨ìˆ˜ë¼ë©´ ì½”ë“œë§Œ ë”°ë¡œ ë¹¼ê³  ì˜ì¡´ì„± íŒ¨í‚¤ì§€ëŠ” Layersë¼ëŠ” ê³³ìœ¼ë¡œ ë¹¼ì„œ ì‚¬ìš©í•´!â€ ì¦‰, êµ‰ì¥íˆ í¸ë¦¬í•´ì§„ ìš”ì†Œê°€ ì¶”ê°€ëœ ê²ƒì´ì£ . ê·¸ë ‡ë‹¤ë©´ LayersëŠ” ì–´ë–»ê²Œ ë™ì‘í• ê¹Œìš”? âœ… ëŒë‹¤ ì‚¬ìš©ì„ ìœ„í•´ ê°„ë‹¨í•œ ì˜ˆì œë¥¼ í†µí•œ ì‹¤ìŠµì„ í•´ë³´ì. ğŸ•íŠœí† ë¦¬ì–¼ Lambda LayersëŠ” ì–´ë–»ê²Œ ì‚¬ìš©í•˜ë‚˜ìš”? ì•„ì£¼ì•„ì£¼ ê°„ë‹¨í•˜ê³  ì‹¬í”Œí•œ í¬ë¡¤ë§ ì½”ë“œë¥¼ Lambdaì— ì˜¬ë ¤ ì‚¬ìš©í•œë‹¤ê³  ê°€ì •í•´ë´…ì‹œë‹¤. í•´ë‹¹ ì½”ë“œëŠ” requestsì™€ bs4ë¼ëŠ” ëª¨ë“ˆì„ ì‚¬ìš©í•©ë‹ˆë‹¤.\r\nì´ ë¸”ë¡œê·¸ë¥¼ ê¸ì–´ h1íƒœê·¸ í•˜ë‚˜ì˜ ê¸€ìë¥¼ ê°€ì ¸ì™€ë´…ì‹œë‹¤. í•˜ì§€ë§Œ ì•„ë¬´ëŸ° ì¤€ë¹„ ì—†ì´ AWS Lambda ì½˜ì†”ì—ì„œ ìœ„ ì½”ë“œë¥¼ ì €ì¥í•˜ê³  ì‹¤í–‰í•˜ë©´ ì•„ë˜ì™€ ê°™ì€ No module named â€˜requestsâ€™ ì—ëŸ¬ê°€ ë‚©ë‹ˆë‹¤. ìœ„ ì—ëŸ¬ ë©”ì‹œì§€ëŠ” requestsë¼ëŠ” ëª¨ë“ˆì„ ì°¾ì„ ìˆ˜ ì—†ë‹¤ëŠ” íŒŒì´ì¬ ì—ëŸ¬ì…ë‹ˆâ€¦","frontmatter":{"date":"March 21, 2022","title":"Lambda Layers ì‚¬ìš©í•˜ê¸°","categories":"AWS","author":"ì©¡ê¸°","emoji":"ğŸš€"},"fields":{"slug":"/gatsby-aws-study-lambda-import-tutorial/"}},"next":{"id":"634b475f-1114-5b88-999c-a64601fb240a","html":"<h2 id=\"-ê°œìš”\" style=\"position:relative;\"><a href=\"#-%EA%B0%9C%EC%9A%94\" aria-label=\" ê°œìš” permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>âœ… ê°œìš”</h2>\n<p>AWS ì˜ OpenSearchì— ì ‘ê·¼í•˜ì—¬ ë°ì´í„°ë¥¼ ìƒì„±í•´ë³´ì.</p>\n<blockquote>\n<p>Aws OpenSearch(Elasticsearch) ê´€ë ¨ í¬ìŠ¤íŒ…ì€ <a href=\"https://leesungki.github.io/gatsby-aws-history-of-opensearch-tuto\">ì—¬ê¸°</a>ë¥¼ ì°¸ê³ í•˜ì</p>\n</blockquote>\n<h3 id=\"aws-opensearch-ì—°ë™\" style=\"position:relative;\"><a href=\"#aws-opensearch-%EC%97%B0%EB%8F%99\" aria-label=\"aws opensearch ì—°ë™ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>AWS OpenSearch ì—°ë™</h3>\n<p>ê¸°ë³¸ í”„ë¡œì íŠ¸ êµ¬ì¡°</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">infra\r\n    ã„´aws\r\n        ã„´AWSRequestSigningApacheInterceptor\r\ncontroller\r\n    ã„´DataCheckController        </code></pre></div>\n<ol>\n<li>ì˜ì¡´ì„± ì¶”ê°€</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">dependencies {    \r\n    implementation group: 'org.opensearch.client', name: 'opensearch-rest-high-level-client', version: '1.2.4'\r\n}</code></pre></div>\n<ol start=\"2\">\n<li>AWSRequestSigningApacheInterceptor ì¶”ê°€</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">/**\r\n * An {@link HttpRequestInterceptor} that signs requests using any AWS {@link Signer}\r\n * and {@link AWSCredentialsProvider}.\r\n */</span>\r\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AWSRequestSigningApacheInterceptor</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">HttpRequestInterceptor</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token comment\">/**\r\n     * The service that we're connecting to. Technically not necessary.\r\n     * Could be used by a future Signer, though.\r\n     */</span>\r\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> service<span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token comment\">/**\r\n     * The particular signer implementation.\r\n     */</span>\r\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Signer</span> signer<span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token comment\">/**\r\n     * The source of AWS credentials for signing.\r\n     */</span>\r\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">AWSCredentialsProvider</span> awsCredentialsProvider<span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token comment\">/**\r\n     *\r\n     * @param service service that we're connecting to\r\n     * @param signer particular signer implementation\r\n     * @param awsCredentialsProvider source of AWS credentials for signing\r\n     */</span>\r\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">AWSRequestSigningApacheInterceptor</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> service<span class=\"token punctuation\">,</span>\r\n                                              <span class=\"token keyword\">final</span> <span class=\"token class-name\">Signer</span> signer<span class=\"token punctuation\">,</span>\r\n                                              <span class=\"token keyword\">final</span> <span class=\"token class-name\">AWSCredentialsProvider</span> awsCredentialsProvider<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>service <span class=\"token operator\">=</span> service<span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>signer <span class=\"token operator\">=</span> signer<span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>awsCredentialsProvider <span class=\"token operator\">=</span> awsCredentialsProvider<span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n    <span class=\"token comment\">/**\r\n     * {@inheritDoc}\r\n     */</span>\r\n    <span class=\"token annotation punctuation\">@Override</span>\r\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">process</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">HttpRequest</span> request<span class=\"token punctuation\">,</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">HttpContext</span> context<span class=\"token punctuation\">)</span>\r\n            <span class=\"token keyword\">throws</span> <span class=\"token class-name\">HttpException</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">IOException</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token class-name\">URIBuilder</span> uriBuilder<span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\r\n            uriBuilder <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">URIBuilder</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span><span class=\"token function\">getRequestLine</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getUri</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">URISyntaxException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">IOException</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Invalid URI\"</span> <span class=\"token punctuation\">,</span> e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n\r\n        <span class=\"token comment\">// Copy Apache HttpRequest to AWS DefaultRequest</span>\r\n        <span class=\"token class-name\">DefaultRequest</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token operator\">?</span><span class=\"token punctuation\">></span></span> signableRequest <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DefaultRequest</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span>service<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token class-name\">HttpHost</span> host <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpHost</span><span class=\"token punctuation\">)</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">getAttribute</span><span class=\"token punctuation\">(</span>HTTP_TARGET_HOST<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>host <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            signableRequest<span class=\"token punctuation\">.</span><span class=\"token function\">setEndpoint</span><span class=\"token punctuation\">(</span>URI<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>host<span class=\"token punctuation\">.</span><span class=\"token function\">toURI</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n        <span class=\"token keyword\">final</span> <span class=\"token class-name\">HttpMethodName</span> httpMethod <span class=\"token operator\">=</span>\r\n                <span class=\"token class-name\">HttpMethodName</span><span class=\"token punctuation\">.</span><span class=\"token function\">fromValue</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span><span class=\"token function\">getRequestLine</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getMethod</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        signableRequest<span class=\"token punctuation\">.</span><span class=\"token function\">setHttpMethod</span><span class=\"token punctuation\">(</span>httpMethod<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\r\n            signableRequest<span class=\"token punctuation\">.</span><span class=\"token function\">setResourcePath</span><span class=\"token punctuation\">(</span>uriBuilder<span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getRawPath</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">URISyntaxException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">IOException</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Invalid URI\"</span> <span class=\"token punctuation\">,</span> e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n\r\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>request <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">HttpEntityEnclosingRequest</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token class-name\">HttpEntityEnclosingRequest</span> httpEntityEnclosingRequest <span class=\"token operator\">=</span>\r\n                    <span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpEntityEnclosingRequest</span><span class=\"token punctuation\">)</span> request<span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>httpEntityEnclosingRequest<span class=\"token punctuation\">.</span><span class=\"token function\">getEntity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                signableRequest<span class=\"token punctuation\">.</span><span class=\"token function\">setContent</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">ByteArrayInputStream</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token keyword\">byte</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\r\n                signableRequest<span class=\"token punctuation\">.</span><span class=\"token function\">setContent</span><span class=\"token punctuation\">(</span>httpEntityEnclosingRequest<span class=\"token punctuation\">.</span><span class=\"token function\">getEntity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getContent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span>\r\n        signableRequest<span class=\"token punctuation\">.</span><span class=\"token function\">setParameters</span><span class=\"token punctuation\">(</span><span class=\"token function\">nvpToMapParams</span><span class=\"token punctuation\">(</span>uriBuilder<span class=\"token punctuation\">.</span><span class=\"token function\">getQueryParams</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        signableRequest<span class=\"token punctuation\">.</span><span class=\"token function\">setHeaders</span><span class=\"token punctuation\">(</span><span class=\"token function\">headerArrayToMap</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span><span class=\"token function\">getAllHeaders</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token comment\">// Sign it</span>\r\n        signer<span class=\"token punctuation\">.</span><span class=\"token function\">sign</span><span class=\"token punctuation\">(</span>signableRequest<span class=\"token punctuation\">,</span> awsCredentialsProvider<span class=\"token punctuation\">.</span><span class=\"token function\">getCredentials</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token comment\">// Now copy everything back</span>\r\n        request<span class=\"token punctuation\">.</span><span class=\"token function\">setHeaders</span><span class=\"token punctuation\">(</span><span class=\"token function\">mapToHeaderArray</span><span class=\"token punctuation\">(</span>signableRequest<span class=\"token punctuation\">.</span><span class=\"token function\">getHeaders</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>request <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">HttpEntityEnclosingRequest</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token class-name\">HttpEntityEnclosingRequest</span> httpEntityEnclosingRequest <span class=\"token operator\">=</span>\r\n                    <span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpEntityEnclosingRequest</span><span class=\"token punctuation\">)</span> request<span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>httpEntityEnclosingRequest<span class=\"token punctuation\">.</span><span class=\"token function\">getEntity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token class-name\">BasicHttpEntity</span> basicHttpEntity <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">BasicHttpEntity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                basicHttpEntity<span class=\"token punctuation\">.</span><span class=\"token function\">setContent</span><span class=\"token punctuation\">(</span>signableRequest<span class=\"token punctuation\">.</span><span class=\"token function\">getContent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                httpEntityEnclosingRequest<span class=\"token punctuation\">.</span><span class=\"token function\">setEntity</span><span class=\"token punctuation\">(</span>basicHttpEntity<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span>\r\n    <span class=\"token comment\">/**\r\n     *\r\n     * @param params list of HTTP query params as NameValuePairs\r\n     * @return a multimap of HTTP query params\r\n     */</span>\r\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">List</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span><span class=\"token punctuation\">></span></span> <span class=\"token function\">nvpToMapParams</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">NameValuePair</span><span class=\"token punctuation\">></span></span> params<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">List</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span><span class=\"token punctuation\">></span></span> parameterMap <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">TreeMap</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">.</span>CASE_INSENSITIVE_ORDER<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">NameValuePair</span> nvp <span class=\"token operator\">:</span> params<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> argsList <span class=\"token operator\">=</span>\r\n                    parameterMap<span class=\"token punctuation\">.</span><span class=\"token function\">computeIfAbsent</span><span class=\"token punctuation\">(</span>nvp<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> k <span class=\"token operator\">-></span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            argsList<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>nvp<span class=\"token punctuation\">.</span><span class=\"token function\">getValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n        <span class=\"token keyword\">return</span> parameterMap<span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n    <span class=\"token comment\">/**\r\n     * @param headers modeled Header objects\r\n     * @return a Map of header entries\r\n     */</span>\r\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">headerArrayToMap</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">Header</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> headers<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> headersMap <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">TreeMap</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">.</span>CASE_INSENSITIVE_ORDER<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Header</span> header <span class=\"token operator\">:</span> headers<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">skipHeader</span><span class=\"token punctuation\">(</span>header<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                headersMap<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span>header<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> header<span class=\"token punctuation\">.</span><span class=\"token function\">getValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span>\r\n        <span class=\"token keyword\">return</span> headersMap<span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n    <span class=\"token comment\">/**\r\n     * @param header header line to check\r\n     * @return true if the given header should be excluded when signing\r\n     */</span>\r\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">skipHeader</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">Header</span> header<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"content-length\"</span><span class=\"token punctuation\">.</span><span class=\"token function\">equalsIgnoreCase</span><span class=\"token punctuation\">(</span>header<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n                <span class=\"token operator\">&amp;&amp;</span> <span class=\"token string\">\"0\"</span><span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span>header<span class=\"token punctuation\">.</span><span class=\"token function\">getValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// Strip Content-Length: 0</span>\r\n                <span class=\"token operator\">||</span> <span class=\"token string\">\"host\"</span><span class=\"token punctuation\">.</span><span class=\"token function\">equalsIgnoreCase</span><span class=\"token punctuation\">(</span>header<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Host comes from endpoint</span>\r\n    <span class=\"token punctuation\">}</span>\r\n    <span class=\"token comment\">/**\r\n     * @param mapHeaders Map of header entries\r\n     * @return modeled Header objects\r\n     */</span>\r\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">Header</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token function\">mapToHeaderArray</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> mapHeaders<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token class-name\">Header</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> headers <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Header</span><span class=\"token punctuation\">[</span>mapHeaders<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Map<span class=\"token punctuation\">.</span>Entry</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> headerEntry <span class=\"token operator\">:</span> mapHeaders<span class=\"token punctuation\">.</span><span class=\"token function\">entrySet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            headers<span class=\"token punctuation\">[</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">BasicHeader</span><span class=\"token punctuation\">(</span>headerEntry<span class=\"token punctuation\">.</span><span class=\"token function\">getKey</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> headerEntry<span class=\"token punctuation\">.</span><span class=\"token function\">getValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n        <span class=\"token keyword\">return</span> headers<span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><a href=\"https://github.com/amazon-archives/aws-request-signing-apache-interceptor\">ì°¸ê³ </a></p>\n<ol start=\"3\">\n<li>DataCheckController</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Slf4j</span>\r\n<span class=\"token annotation punctuation\">@RestController</span>\r\n<span class=\"token annotation punctuation\">@RequestMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/api/v1\"</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">DataCheckController</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token comment\">/**\r\n     * aws ê°€ìš© ì§€ì—­\r\n     */</span>\r\n    <span class=\"token annotation punctuation\">@Value</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"${cloud.aws.region.static}\"</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> region<span class=\"token punctuation\">;</span><span class=\"token comment\">//ap-northeast-2 ì„œìš¸ë¦¬ì „</span>\r\n\r\n    <span class=\"token annotation punctuation\">@GetMapping</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"/search1\"</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">search1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">IOException</span> <span class=\"token punctuation\">{</span>\r\n        log<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"------------------------------------->search1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token class-name\">RestHighLevelClient</span> searchClient <span class=\"token operator\">=</span> <span class=\"token function\">searchClient</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token comment\">// Create the document as a hash map</span>\r\n        <span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">></span></span> document <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HashMap</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        document<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"title\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Walk the Line\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        document<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"director\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"James Mangold\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        document<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"year\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"2005\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        log<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"------------------------------------->Map\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token comment\">// Form the indexing request, send it, and print the response</span>\r\n        <span class=\"token class-name\">IndexRequest</span> request <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">IndexRequest</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"my-index\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"_doc\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">source</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token class-name\">IndexResponse</span> response <span class=\"token operator\">=</span> searchClient<span class=\"token punctuation\">.</span><span class=\"token function\">index</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> <span class=\"token class-name\">RequestOptions</span><span class=\"token punctuation\">.</span>DEFAULT<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"response=========>\"</span><span class=\"token operator\">+</span>response<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"response Result=========>\"</span><span class=\"token operator\">+</span>response<span class=\"token punctuation\">.</span><span class=\"token function\">getIndex</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">return</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token punctuation\">}</span>\r\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">String</span> serviceName <span class=\"token operator\">=</span> <span class=\"token string\">\"es\"</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">String</span> host <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// e.g. https://search-mydomain.us-west-1.es.amazonaws.com ì•¤ë“œí¬ì¸íŠ¸</span>\r\n\r\n    <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">AWSCredentialsProvider</span> credentialsProvider <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DefaultAWSCredentialsProviderChain</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">RestHighLevelClient</span> <span class=\"token function\">searchClient</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        log<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"------------------------------------->RestHighLevelClient\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token class-name\">AWS4Signer</span> signer <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AWS4Signer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        signer<span class=\"token punctuation\">.</span><span class=\"token function\">setServiceName</span><span class=\"token punctuation\">(</span>serviceName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        signer<span class=\"token punctuation\">.</span><span class=\"token function\">setRegionName</span><span class=\"token punctuation\">(</span>region<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token class-name\">HttpRequestInterceptor</span> interceptor <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AWSRequestSigningApacheInterceptor</span><span class=\"token punctuation\">(</span>serviceName<span class=\"token punctuation\">,</span> signer<span class=\"token punctuation\">,</span> credentialsProvider<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RestHighLevelClient</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">RestClient</span><span class=\"token punctuation\">.</span><span class=\"token function\">builder</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpHost</span><span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>host<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">setHttpClientConfigCallback</span><span class=\"token punctuation\">(</span>hacb <span class=\"token operator\">-></span> hacb<span class=\"token punctuation\">.</span><span class=\"token function\">addInterceptorLast</span><span class=\"token punctuation\">(</span>interceptor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>   \r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ol start=\"4\">\n<li>í¬ìŠ¤íŠ¸ë§¨ í˜¸ì¶œ</li>\n</ol>\n<p><img src=\"/1c399e99d3045f45524e33758357817b/sbes1.png\" alt=\"sbes1.PNG\"></p>\n<ol start=\"5\">\n<li>í‚¤ë°”ë‚˜ í™•ì¸</li>\n</ol>\n<p><img src=\"/d6c68d61e4c9a5620163f5436167349d/sbes2.png\" alt=\"sbes2.PNG\"></p>\n<h2 id=\"ë§ˆë¬´ë¦¬\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"ë§ˆë¬´ë¦¬ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸŒ­ë§ˆë¬´ë¦¬</h2>\n<p>ìœ„ì™€ ê°™ì´ springbootì—ì„œ OpenSearch(Elasticsearch)ì— ì¸ë±ìŠ¤ë¥¼ ìƒì„±í•´ì£¼ì—ˆê³  í™•ì¸ê¹Œì§€ í• ìˆ˜ ìˆì—ˆë‹¤.</p>\n<p>ë‹¤ìŒì—ëŠ” OpenSearch(Elasticsearch)ë¥¼ í™œìš©í•œ ê°„ë‹¨í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë§Œë“¤ì–´ ë³´ì.</p>\n<br>\r\n<br>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#-%EA%B0%9C%EC%9A%94\">âœ… ê°œìš”</a></p>\n<ul>\n<li><a href=\"#aws-opensearch-%EC%97%B0%EB%8F%99\">AWS OpenSearch ì—°ë™</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\">ğŸŒ­ë§ˆë¬´ë¦¬</a></p>\n</li>\n</ul>\n</div>","frontmatter":{"date":"March 15, 2022","title":"Spring Boot + Aws OpenSearch(Elasticsearch) ì—°ë™","categories":"SpringBoot","author":"ì©¡ê¸°","emoji":"ğŸ§™â€â™‚ï¸"},"fields":{"slug":"/springbootStudyOpensearch/"}},"prev":{"id":"af1aaf94-5f76-5b5b-84a0-804cc377fe65","html":"<h2 id=\"-ê°œìš”\" style=\"position:relative;\"><a href=\"#-%EA%B0%9C%EC%9A%94\" aria-label=\" ê°œìš” permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>âœ… ê°œìš”</h2>\n<p>AWS ì˜ OpenSearchë¥¼ ì‚¬ìš©í•˜ì—¬ ê°„ë‹¨í•œ Serverless ê²€ìƒ‰ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìƒì„±í•´ë³´ì</p>\n<p>Amazon API Gatewayë¡œ ì‚¬ìš©ìë¥¼ OpenSearch API ë° AWS Lambdaì˜ í•˜ìœ„ ì§‘í•©ìœ¼ë¡œ ì œí•œí•˜ì—¬ API Gatewayì—ì„œ OpenSearch Serviceë¡œ ë³´ë‚´ëŠ” ìš”ì²­ì— ì„œëª…í•˜ë„ë¡ êµ¬í˜„ í•˜ê² ë‹¤.</p>\n<blockquote>\n<p>Aws OpenSearch(Elasticsearch) ê´€ë ¨ í¬ìŠ¤íŒ…ì€ <a href=\"https://leesungki.github.io/gatsby-aws-history-of-opensearch-tuto\">ì—¬ê¸°</a>ë¥¼ ì°¸ê³ í•˜ì</p>\n</blockquote>\n<h2 id=\"-1ë‹¨ê³„-ìƒ˜í”Œ-ë°ì´í„°-ì¸ë±ì‹±\" style=\"position:relative;\"><a href=\"#-1%EB%8B%A8%EA%B3%84-%EC%83%98%ED%94%8C-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%9D%B8%EB%8D%B1%EC%8B%B1\" aria-label=\" 1ë‹¨ê³„ ìƒ˜í”Œ ë°ì´í„° ì¸ë±ì‹± permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ§€ 1ë‹¨ê³„: ìƒ˜í”Œ ë°ì´í„° ì¸ë±ì‹±</h2>\n<p>ì‚¬ì „ ì¡°ê±´ì€ OpenSearch Service ë„ë©”ì¸ì…ë‹ˆë‹¤.\r\n<a href=\"https://leesungki.github.io/gatsby-aws-history-of-opensearch-tuto/\">ì´ì „ í¬ìŠ¤íŒ…</a>ì„ ì°¸ê³ í•˜ì—¬ ë„ë©”ì¸ì€ ë§Œë“¤ì–´ì ¸ ìˆë‹¤ëŠ” ê°€ì •í•˜ì— ì§„í–‰ í•©ë‹ˆë‹¤.</p>\n<p><a href=\"https://github.com/LeeSungKi/OpenSearchApp/blob/main/sample-movies.zip\">sample-movies.zip</a>ì„ ë‹¤ìš´ë¡œë“œí•˜ì—¬ ì••ì¶•ì„ í•´ì œí•˜ê³  _bulk APIë¥¼ ì‚¬ìš©í•´ 5,000ê°œ ë¬¸ì„œë¥¼ movies ì¸ë±ìŠ¤ì— ì¶”ê°€í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">POST https://search-my-domain.us-west-1.es.amazonaws.com/_bulk //ë‚˜ì˜ ì˜¤í”ˆì„œì¹˜ ë„ë©”ì¸\r\n\r\n//sample-movies.zipíŒŒì¼\r\n{ \"index\": { \"_index\": \"movies\", \"_type\": \"movie\", \"_id\": \"tt1979320\" } }\r\n{\"directors\":[\"Ron Howard\"],\"release_date\":\"2013-09-02T00:00:00Z\",\"rating\":8.3,\"genres\":[\"Action\",\"Biography\",\"Drama\",\"Sport\"],\"image_url\":\"http://ia.media-imdb.com/images/M/MV5BMTQyMDE0MTY0OV5BMl5BanBnXkFtZTcwMjI2OTI0OQ@@._V1_SX400_.jpg\",\"plot\":\"A re-creation of the merciless 1970s rivalry between Formula One rivals James Hunt and Niki Lauda.\",\"title\":\"Rush\",\"rank\":2,\"running_time_secs\":7380,\"actors\":[\"Daniel BrÃ¼hl\",\"Chris Hemsworth\",\"Olivia Wilde\"],\"year\":2013,\"id\":\"tt1979320\",\"type\":\"add\"}\r\n{ \"index\": { \"_index\": \"movies\", \"_type\": \"movie\", \"_id\": \"tt1951264\" } }\r\n{\"directors\":[\"Francis Lawrence\"],\"release_date\":\"2013-11-11T00:00:00Z\",\"genres\":[\"Action\",\"Adventure\",\"Sci-Fi\",\"Thriller\"],\"image_url\":\"http://ia.media-imdb.com/images/M/MV5BMTAyMjQ3OTAxMzNeQTJeQWpwZ15BbWU4MDU0NzA1MzAx._V1_SX400_.jpg\",\"plot\":\"Katniss Everdeen and Peeta Mellark become targets of the Capitol after their victory in the 74th Hunger Games sparks a rebellion in the Districts of Panem.\",\"title\":\"The Hunger Games: Catching Fire\",\"rank\":4,\"running_time_secs\":8760,\"actors\":[\"Jennifer Lawrence\",\"Josh Hutcherson\",\"Liam Hemsworth\"],\"year\":2013,\"id\":\"tt1951264\",\"type\":\"add\"}\r\n...       </code></pre></div>\n<br>\r\ní‚¤ë°”ë‚˜ ì½˜ì†” ì—ì„œ ë°ì´í„° í™•ì¸\r\n<br>\r\n<br>\n<p><img src=\"/1de1a9f95da82394b1f2cf4fc29c86a5/estuto1.png\" alt=\"estuto1.PNG\"></p>\n<h2 id=\"-2ë‹¨ê³„-api-gatewayì—ì„œ-api-ìƒì„±\" style=\"position:relative;\"><a href=\"#-2%EB%8B%A8%EA%B3%84-api-gateway%EC%97%90%EC%84%9C-api-%EC%83%9D%EC%84%B1\" aria-label=\" 2ë‹¨ê³„ api gatewayì—ì„œ api ìƒì„± permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ¥¨ 2ë‹¨ê³„: API Gatewayì—ì„œ API ìƒì„±</h2>\n<p>API Gatewayë¥¼ ì‚¬ìš©í•˜ë©´ ë³´ë‹¤ ì œí•œëœ APIë¥¼ ìƒì„±í•˜ê³  OpenSearch _search APIì™€ì˜ ìƒí˜¸ ì‘ìš©ì„ ê°„ì†Œí™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. API Gatewayë¥¼ ì‚¬ìš©í•˜ë©´ Amazon Cognito ì¸ì¦ ë° ìš”ì²­ ì¡°ì ˆ ê°™ì€ ë³´ì•ˆ ê¸°ëŠ¥ì„ í™œì„±í™”í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. APIë¥¼ ìƒì„±í•˜ê³  ë°°í¬í•˜ë ¤ë©´ ë‹¤ìŒ ë‹¨ê³„ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.</p>\n<h3 id=\"api-ìƒì„±-ë°-êµ¬ì„±\" style=\"position:relative;\"><a href=\"#api-%EC%83%9D%EC%84%B1-%EB%B0%8F-%EA%B5%AC%EC%84%B1\" aria-label=\"api ìƒì„± ë° êµ¬ì„± permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>API ìƒì„± ë° êµ¬ì„±</h3>\n<p>API Gateway ì½˜ì†”ì„ ì‚¬ìš©í•˜ì—¬ APIë¥¼ ìƒì„±í•˜ë ¤ë©´</p>\n<ol>\n<li>API Gateway ë‚´ì—ì„œ API ìƒì„±(Create API)ì„ ì„ íƒí•©ë‹ˆë‹¤.</li>\n</ol>\n<br>\n<p><img src=\"/f38546d98d8a46aef04667bfdbb6eb23/estuto2.png\" alt=\"estuto2.PNG\">\r\n<br></p>\n<ol start=\"2\">\n<li>REST API(ë¹„ê³µê°œ ì•„ë‹˜)ë¥¼ ì°¾ê³  êµ¬ì¶•(Build)ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.</li>\n</ol>\n<br>\n<p><img src=\"/d69ebf6e1b94082cf43fe4875e35f9b3/estuto3.png\" alt=\"estuto3.PNG\">\r\n<br></p>\n<ol start=\"3\">\n<li>ë‹¤ìŒ í•„ë“œë¥¼ êµ¬ì„±í•©ë‹ˆë‹¤.</li>\n</ol>\n<br>\n<p><img src=\"/1f4977437640b3c7294c8870c33b5cfe/estuto4.png\" alt=\"estuto4.PNG\"></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">- API ì´ë¦„: OpenSearch-api\r\n- ì„¤ëª…: Amazon OpenSearch Service API\r\n- ì—”ë“œí¬ì¸íŠ¸ ìœ í˜•: ë¦¬ì „ë³„</code></pre></div>\n<br>\n<ol start=\"4\">\n<li>API ìƒì„±(Create API)ì„ ì„ íƒí•©ë‹ˆë‹¤.</li>\n</ol>\n<br>\n<ol start=\"5\">\n<li>ì‘ì—…(Actions) ë° ë©”ì„œë“œ ìƒì„±(Create Method)ì„ ì„ íƒí•©ë‹ˆë‹¤.</li>\n</ol>\n<br>\n<p><img src=\"/fc89e55d7b6d475844bf1500caf35458/estuto5.png\" alt=\"estuto5.PNG\">\r\n<br></p>\n<ol start=\"6\">\n<li>ë“œë¡­ë‹¤ìš´ì—ì„œ GETì„ ì„ íƒí•˜ê³  í™•ì¸ í‘œì‹œë¥¼ í´ë¦­í•˜ì—¬ í™•ì¸í•©ë‹ˆë‹¤.</li>\n</ol>\n<br>\n<ol start=\"7\">\n<li>ë‹¤ìŒ ì„¤ì •ì„ êµ¬ì„±í•œ ë‹¤ìŒ ì €ì¥(Save)ì„ ì„ íƒí•©ë‹ˆë‹¤.</li>\n</ol>\n<br>\n<p><img src=\"/5e973e943c271132f7f6d17e154e7f73/estuto6.png\" alt=\"estuto6.PNG\"></p>\n<table>\n<thead>\n<tr>\n<th>ì„¤ì •</th>\n<th>ê°’</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>í†µí•© ìœ í˜•</td>\n<td>Lambda í•¨ìˆ˜</td>\n</tr>\n<tr>\n<td>Lambda í”„ë¡ì‹œ í†µí•© ì‚¬ìš©</td>\n<td>ì˜ˆ</td>\n</tr>\n<tr>\n<td>Lambda ë¦¬ì „</td>\n<td>ap-northeast-2</td>\n</tr>\n<tr>\n<td>Lambda í•¨ìˆ˜</td>\n<td>opensearch-lambda</td>\n</tr>\n<tr>\n<td>ê¸°ë³¸ ì œí•œ ì‹œê°„ ì‚¬ìš©</td>\n<td>ì˜ˆ</td>\n</tr>\n</tbody>\n</table>\n<br>\t\n<h3 id=\"ë©”ì„œë“œ-ìš”ì²­-êµ¬ì„±\" style=\"position:relative;\"><a href=\"#%EB%A9%94%EC%84%9C%EB%93%9C-%EC%9A%94%EC%B2%AD-%EA%B5%AC%EC%84%B1\" aria-label=\"ë©”ì„œë“œ ìš”ì²­ êµ¬ì„± permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë©”ì„œë“œ ìš”ì²­ êµ¬ì„±</h3>\n<p>ë©”ì„œë“œ ìš”ì²­(Method Request)ì„ ì„ íƒí•˜ê³  ë‹¤ìŒ ì„¤ì •ì„ êµ¬ì„±í•©ë‹ˆë‹¤.\r\n<br></p>\n<p><img src=\"/22c57b077a560957ad2823875ee104ea/estuto7.png\" alt=\"estuto7.PNG\"></p>\n<table>\n<thead>\n<tr>\n<th>ì„¤ì •</th>\n<th>ê°’</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>ìŠ¹ì¸</td>\n<td>NONE</td>\n</tr>\n<tr>\n<td>ìš”ì²­ ê²€ì‚¬ê¸°</td>\n<td>ì¿¼ë¦¬ ë¬¸ìì—´ íŒŒë¼ë¯¸í„° ë° í—¤ë” ê²€ì‚¬</td>\n</tr>\n<tr>\n<td>í•„ìˆ˜ API í‚¤</td>\n<td>false</td>\n</tr>\n</tbody>\n</table>\n<br>\n<p>URL ì¿¼ë¦¬ ë¬¸ìì—´ íŒŒë¼ë¯¸í„°\r\n<br></p>\n<table>\n<thead>\n<tr>\n<th>ì„¤ì •</th>\n<th>ê°’</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>ì´ë¦„</td>\n<td>q</td>\n</tr>\n<tr>\n<td>í•„ìˆ˜</td>\n<td>ì˜ˆ</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"api-ë°°í¬-ë°-ë‹¨ê³„-êµ¬ì„±\" style=\"position:relative;\"><a href=\"#api-%EB%B0%B0%ED%8F%AC-%EB%B0%8F-%EB%8B%A8%EA%B3%84-%EA%B5%AC%EC%84%B1\" aria-label=\"api ë°°í¬ ë° ë‹¨ê³„ êµ¬ì„± permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>API ë°°í¬ ë° ë‹¨ê³„ êµ¬ì„±</h3>\n<p>API Gateway ì½˜ì†”ì—ì„œ ë°°í¬ë¥¼ ìƒì„±í•˜ê³  ìƒˆ ë‹¨ê³„ ë˜ëŠ” ê¸°ì¡´ ë‹¨ê³„ì— ì—°ê²°í•˜ì—¬ APIë¥¼ ë°°í¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\r\n<br></p>\n<ol>\n<li>ì‘ì—…(Actions) ë° API ë°°í¬(Deploy API)ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.</li>\n</ol>\n<br>\n<p><img src=\"/d8390b31d2b5b1e42c0d15e1ba06fd45/estuto8.png\" alt=\"estuto8.PNG\">\r\n<br></p>\n<ol start=\"2\">\n<li>ë°°í¬ ë‹¨ê³„(Deployment stage)ì—ì„œ ìƒˆ ë‹¨ê³„(New Stage)ë¥¼ í´ë¦­í•˜ê³  ë‹¨ê³„ ì´ë¦„ì„ opensearch-api-testë¡œ ì§€ì •í•©ë‹ˆë‹¤.</li>\n</ol>\n<br>\n<ol start=\"3\">\n<li>ë°°í¬(Deploy)ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.</li>\n</ol>\n<br>\n<p><img src=\"/d9abe088bac4567aa74b81f65d523512/estuto9.png\" alt=\"estuto9.PNG\">\r\n<br></p>\n<ol start=\"4\">\n<li>ë‹¨ê³„ í¸ì§‘ê¸°ì—ì„œ ë‹¤ìŒ ì„¤ì •ì„ êµ¬ì„±í•œ ë‹¤ìŒ ë³€ê²½ ë‚´ìš© ì €ì¥(Save Changes)ì„ ì„ íƒí•©ë‹ˆë‹¤.</li>\n</ol>\n<br>\n<p><img src=\"/ffe5a5cd85378070b1c39ddf4a128016/estuto10.png\" alt=\"estuto10.PNG\"></p>\n<table>\n<thead>\n<tr>\n<th>ì„¤ì •</th>\n<th>ê°’</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>ì¡°ì ˆ í™œì„±í™”</td>\n<td>ì˜ˆ</td>\n</tr>\n<tr>\n<td>ìš”ìœ¨</td>\n<td>1000</td>\n</tr>\n<tr>\n<td>ë²„ìŠ¤íŠ¸</td>\n<td>500</td>\n</tr>\n</tbody>\n</table>\n<br>\r\nì´ëŸ¬í•œ ì„¤ì •ì€ ì—”ë“œí¬ì¸íŠ¸ ë£¨íŠ¸ì— ëŒ€í•œ GET ìš”ì²­ (https://some-id.execute-api.ap-northeast-2.amazonaws.com/search-es-api-test) ë©”ì„œë“œ í•˜ë‚˜ë¿ì¸ APIë¥¼ êµ¬ì„±í•©ë‹ˆë‹¤.\n<p>ì´ ìš”ì²­ì—ëŠ” íŒŒë¼ë¯¸í„° í•˜ë‚˜(q), ì¦‰ ê²€ìƒ‰í•  ì¿¼ë¦¬ ë¬¸ìì—´ì´ í•„ìš”í•©ë‹ˆë‹¤.</p>\n<p>ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ ìš”ì²­ì´ Lambdaë¡œ ì „ì†¡ë˜ì–´ opensearch-lambda í•¨ìˆ˜ê°€ ì‹¤í–‰ë©ë‹ˆë‹¤.</p>\n<h2 id=\"-3ë‹¨ê³„-lambda-í•¨ìˆ˜-ìƒì„±-ë°-ë°°í¬\" style=\"position:relative;\"><a href=\"#-3%EB%8B%A8%EA%B3%84-lambda-%ED%95%A8%EC%88%98-%EC%83%9D%EC%84%B1-%EB%B0%8F-%EB%B0%B0%ED%8F%AC\" aria-label=\" 3ë‹¨ê³„ lambda í•¨ìˆ˜ ìƒì„± ë° ë°°í¬ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ” 3ë‹¨ê³„: Lambda í•¨ìˆ˜ ìƒì„± ë° ë°°í¬</h2>\n<p>API Gatewayì—ì„œ APIë¥¼ ìƒì„±í•œ í›„ ìš”ì²­ì„ ì „ë‹¬í•˜ëŠ” Lambda í•¨ìˆ˜ë¥¼ ë§Œë“­ë‹ˆë‹¤.</p>\n<h3 id=\"lambda-í•¨ìˆ˜-ìƒì„±\" style=\"position:relative;\"><a href=\"#lambda-%ED%95%A8%EC%88%98-%EC%83%9D%EC%84%B1\" aria-label=\"lambda í•¨ìˆ˜ ìƒì„± permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Lambda í•¨ìˆ˜ ìƒì„±</h3>\n<p>API Gatewayê°€ ìš”ì²­ì„ ë‹¤ìŒ Python 3.8 Lambda í•¨ìˆ˜ë¡œ ì „ë‹¬í•©ë‹ˆë‹¤, ê·¸ëŸ¬ë©´ ì´ í•¨ìˆ˜ê°€ OpenSearch Serviceë¥¼ ì¿¼ë¦¬í•˜ê³  ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. ì´ í•¨ìˆ˜ì˜ ì´ë¦„ì„ opensearch-lambdaë¡œ ì§€ì •í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"py\"><pre class=\"language-py\"><code class=\"language-py\"><span class=\"token keyword\">import</span> boto3\r\n<span class=\"token keyword\">import</span> json\r\n<span class=\"token keyword\">import</span> requests\r\n<span class=\"token keyword\">from</span> requests_aws4auth <span class=\"token keyword\">import</span> AWS4Auth\r\n\r\nregion <span class=\"token operator\">=</span> <span class=\"token string\">'ap-northeast-2'</span> <span class=\"token comment\"># For example</span>\r\nservice <span class=\"token operator\">=</span> <span class=\"token string\">'opensearchservice'</span>\r\ncredentials <span class=\"token operator\">=</span> boto3<span class=\"token punctuation\">.</span>Session<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>get_credentials<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\nawsauth <span class=\"token operator\">=</span> AWS4Auth<span class=\"token punctuation\">(</span>credentials<span class=\"token punctuation\">.</span>access_key<span class=\"token punctuation\">,</span> credentials<span class=\"token punctuation\">.</span>secret_key<span class=\"token punctuation\">,</span> region<span class=\"token punctuation\">,</span> service<span class=\"token punctuation\">,</span> session_token<span class=\"token operator\">=</span>credentials<span class=\"token punctuation\">.</span>token<span class=\"token punctuation\">)</span>\r\n\r\nhost <span class=\"token operator\">=</span> <span class=\"token string\">''</span> <span class=\"token comment\"># ìì‹ ì˜ OpenSearch domain endpoint</span>\r\nindex <span class=\"token operator\">=</span> <span class=\"token string\">'movies'</span>\r\nurl <span class=\"token operator\">=</span> host <span class=\"token operator\">+</span> <span class=\"token string\">'/'</span> <span class=\"token operator\">+</span> index <span class=\"token operator\">+</span> <span class=\"token string\">'/_search'</span>\r\n\r\n<span class=\"token comment\"># Lambda execution starts here</span>\r\n<span class=\"token keyword\">def</span> <span class=\"token function\">lambda_handler</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n\r\n    <span class=\"token comment\"># Put the user query into the query DSL for more accurate search results.</span>\r\n    <span class=\"token comment\"># Note that certain fields are boosted (^).</span>\r\n    query <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token string\">\"size\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">25</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token string\">\"query\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token string\">\"multi_match\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token string\">\"query\"</span><span class=\"token punctuation\">:</span> event<span class=\"token punctuation\">[</span><span class=\"token string\">'queryStringParameters'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">'q'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token string\">\"fields\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"title^4\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"plot^2\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"actors\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"directors\"</span><span class=\"token punctuation\">]</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token comment\"># Elasticsearch 6.x requires an explicit Content-Type header</span>\r\n    headers <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token string\">\"Content-Type\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"application/json\"</span> <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token comment\"># Make the signed HTTP request</span>\r\n    r <span class=\"token operator\">=</span> requests<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">,</span> auth<span class=\"token operator\">=</span>awsauth<span class=\"token punctuation\">,</span> headers<span class=\"token operator\">=</span>headers<span class=\"token punctuation\">,</span> data<span class=\"token operator\">=</span>json<span class=\"token punctuation\">.</span>dumps<span class=\"token punctuation\">(</span>query<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n\r\n    <span class=\"token comment\"># Create the response and add some extra content to support CORS</span>\r\n    response <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token string\">\"statusCode\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">200</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token string\">\"headers\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token string\">\"Access-Control-Allow-Origin\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'*'</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token string\">\"isBase64Encoded\"</span><span class=\"token punctuation\">:</span> <span class=\"token boolean\">False</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token comment\"># Add the search results to the response</span>\r\n    response<span class=\"token punctuation\">[</span><span class=\"token string\">'body'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> r<span class=\"token punctuation\">.</span>text\r\n    <span class=\"token keyword\">return</span> response</code></pre></div>\n<p>ì´ ìƒ˜í”Œ í•¨ìˆ˜ëŠ” ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ ì½”ë“œê°€ ì‘ë™í•˜ë ¤ë©´ ë°°í¬ íŒ¨í‚¤ì§€ë¥¼ ìƒì„±í•˜ê³  Lambdaì— ì—…ë¡œë“œí•´ì•¼ í•©ë‹ˆë‹¤.</p>\n<p>Lambda í•¨ìˆ˜ ë° ë°°í¬ íŒ¨í‚¤ì§€ë¥¼ ë§Œë“œëŠ” ë°©ë²•ì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì€ <a href=\"https://leesungki.github.io/gatsby-aws-study-lambda-import-tutorial\">Lambda Layers ì‚¬ìš©í•˜ê¸°</a>ë¥¼ ì°¸ê³  í•˜ì„¸ìš”.</p>\n<h3 id=\"í•¸ë“¤ëŸ¬-ìˆ˜ì •\" style=\"position:relative;\"><a href=\"#%ED%95%B8%EB%93%A4%EB%9F%AC-%EC%88%98%EC%A0%95\" aria-label=\"í•¸ë“¤ëŸ¬ ìˆ˜ì • permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>í•¸ë“¤ëŸ¬ ìˆ˜ì •</h3>\n<p>í•¸ë“¤ëŸ¬ëŠ” ì´ë²¤íŠ¸ë¥¼ ì²˜ë¦¬í•˜ëŠ” í•¨ìˆ˜ ì½”ë“œì˜ ë©”ì„œë“œì…ë‹ˆë‹¤. Lambda í•¨ìˆ˜ê°€ ìˆëŠ” ë°°í¬ íŒ¨í‚¤ì§€ì˜ íŒŒì¼ ì´ë¦„ì— ë”°ë¼ í•¸ë“¤ëŸ¬ ì´ë¦„ì„ ë³€ê²½í•´ì•¼ í•©ë‹ˆë‹¤.\r\nì˜ˆë¥¼ ë“¤ì–´, íŒŒì¼ ì´ë¦„ì´ function.pyì¸ ê²½ìš° í•¸ë“¤ëŸ¬ ì´ë¦„ì„ function.lambda_handlerë¡œ ë³€ê²½í•©ë‹ˆë‹¤.</p>\n<p><img src=\"/8b42fb82f95c9fb139d79f97d8124f5b/estuto11.png\" alt=\"estuto11.PNG\"></p>\n<h3 id=\"íŠ¸ë¦¬ê±°-êµ¬ì„±\" style=\"position:relative;\"><a href=\"#%ED%8A%B8%EB%A6%AC%EA%B1%B0-%EA%B5%AC%EC%84%B1\" aria-label=\"íŠ¸ë¦¬ê±° êµ¬ì„± permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>íŠ¸ë¦¬ê±° êµ¬ì„±</h3>\n<p>íŠ¸ë¦¬ê±° ì¶”ê°€(Add trigger)ë¥¼ ì„ íƒí•˜ê³  í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” HTTP ì—”ë“œí¬ì¸íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. íŠ¸ë¦¬ê±° êµ¬ì„±ì€ ë‹¤ìŒê³¼ ê°™ì•„ì•¼ í•©ë‹ˆë‹¤.</p>\n<table>\n<thead>\n<tr>\n<th>íŠ¸ë¦¬ê±°</th>\n<th>API</th>\n<th>ë°°í¬ ë‹¨ê³„</th>\n<th>ë³´ì•ˆ</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>API Gateway</td>\n<td>OpenSearch-api</td>\n<td>OpenSearch-api-test</td>\n<td>ì—´ê¸°</td>\n</tr>\n</tbody>\n</table>\n<p>ì•„ë˜ì²˜ëŸ¼ ì¶”ê°€ ëœë‹¤.</p>\n<p><img src=\"/a1e64625063f9f7c654d2d574da4d441/estuto12.png\" alt=\"estuto12.PNG\"></p>\n<h2 id=\"-4ë‹¨ê³„-ë„ë©”ì¸-ì•¡ì„¸ìŠ¤-ì •ì±…-ìˆ˜ì •\" style=\"position:relative;\"><a href=\"#-4%EB%8B%A8%EA%B3%84-%EB%8F%84%EB%A9%94%EC%9D%B8-%EC%95%A1%EC%84%B8%EC%8A%A4-%EC%A0%95%EC%B1%85-%EC%88%98%EC%A0%95\" aria-label=\" 4ë‹¨ê³„ ë„ë©”ì¸ ì•¡ì„¸ìŠ¤ ì •ì±… ìˆ˜ì • permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ¥ 4ë‹¨ê³„: ë„ë©”ì¸ ì•¡ì„¸ìŠ¤ ì •ì±… ìˆ˜ì •</h2>\n<p>OpenSearch Service ë„ë©”ì¸ì—ì„œ Lambda í•¨ìˆ˜ê°€ movies ì¸ë±ìŠ¤ì— GET ìš”ì²­ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ í—ˆìš©í•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ìŒ ì •ì±…ì€ opensearch-lambda-role(Lambdaë¥¼ í†µí•´ ìƒì„±ë¨)ì— movies ì¸ë±ìŠ¤ì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\r\n  <span class=\"token property\">\"Version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2012-10-17\"</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token property\">\"Statement\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\r\n    <span class=\"token punctuation\">{</span>\r\n      <span class=\"token property\">\"Effect\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Allow\"</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token property\">\"Principal\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token property\">\"AWS\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"arn:aws:iam::123456789012:role/service-role/opensearch-lambda-role-1abcdefg\"</span> <span class=\"token comment\">//ì˜ˆì‹œ</span>\r\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token property\">\"Action\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"es:ESHttpGet\"</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token property\">\"Resource\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"arn:aws:es:us-west-1:123456789012:domain/domain-name/movies/_search\"</span> <span class=\"token comment\">//ì˜ˆì‹œ</span>\r\n    <span class=\"token punctuation\">}</span>\r\n  <span class=\"token punctuation\">]</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<blockquote>\n<p>Lambdaê°€ ìë™ìœ¼ë¡œ ìƒì„±í•˜ëŠ” ì—­í• ì˜ ì •í™•í•œ ì´ë¦„ì„ ì–»ìœ¼ë ¤ë©´ AWS Identity and Access Management(IAM) ì½˜ì†”ë¡œ ì´ë™ì•„í˜€ ì—­í• (Roles)ì„ í´ë¦­í•˜ê³  â€œlambdaâ€ë¥¼ ê²€ìƒ‰í•©ë‹ˆë‹¤.</p>\n</blockquote>\n<h2 id=\"-5ë‹¨ê³„-ì›¹-ì• í”Œë¦¬ì¼€ì´ì…˜-í…ŒìŠ¤íŠ¸\" style=\"position:relative;\"><a href=\"#-5%EB%8B%A8%EA%B3%84-%EC%9B%B9-%EC%95%A0%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98-%ED%85%8C%EC%8A%A4%ED%8A%B8\" aria-label=\" 5ë‹¨ê³„ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ í…ŒìŠ¤íŠ¸ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ¥— 5ë‹¨ê³„: ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ í…ŒìŠ¤íŠ¸</h2>\n<p>ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ í…ŒìŠ¤íŠ¸í•˜ë ¤ë©´</p>\n<ol>\n<li>\n<p><a href=\"https://github.com/LeeSungKi/OpenSearchApp/blob/main/sample-site.zip\">sample-site.zip</a>ì„ ë‹¤ìš´ë¡œë“œí•˜ê³  ì••ì¶•ì„ í•´ì œí•˜ì—¬ ìì£¼ ì‚¬ìš©í•˜ëŠ” í…ìŠ¤íŠ¸ í¸ì§‘ê¸°ì—ì„œ scripts/search.jsë¥¼ ì—½ë‹ˆë‹¤.</p>\n</li>\n<li>\n<p>apigatewayendpoint ë³€ìˆ˜ë¥¼ ì—…ë°ì´íŠ¸í•˜ì—¬ API Gateway ì—”ë“œí¬ì¸íŠ¸ë¥¼ ê°€ë¦¬í‚¤ë„ë¡ í•©ë‹ˆë‹¤. ì—”ë“œí¬ì¸íŠ¸ì˜ í˜•ì‹ì€ <a href=\"https://some-id.execute-api.ap-northeast-2.amazonaws.com/opensearch-api-test%EC%9E%85%EB%8B%88%EB%8B%A4\">https://some-id.execute-api.ap-northeast-2.amazonaws.com/opensearch-api-testì…ë‹ˆë‹¤</a>.</p>\n</li>\n<li>\n<p>index.htmlì„ ì—´ê³  thor, house ë“± ëª‡ ê°€ì§€ ë‹¨ì–´ë¥¼ ê²€ìƒ‰í•´ ë´…ë‹ˆë‹¤.</p>\n</li>\n</ol>\n<p><img src=\"/e1cca3fb8f998b5e9e7e5fde4098ceca/estuto14.png\" alt=\"estuto14.PNG\"></p>\n<h2 id=\"ë§ˆë¬´ë¦¬\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"ë§ˆë¬´ë¦¬ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸŒ­ë§ˆë¬´ë¦¬</h2>\n<p>ì´ë ‡ê²Œ ì˜¤í”ˆì„œì¹˜ë¥¼ í™œìš©í•˜ì—¬ Serverless ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë§Œë“¤ì–´ ë³´ì•˜ë‹¤.</p>\n<p>ê°„ë‹¨í•œê±° ê°™ì§€ë§Œ aws ì„œë¹„ìŠ¤ì— ëŒ€í•œ ì–´ëŠì •ë„ì˜ ì´í•´ë„ê°€ í•„ìš”í•˜ë‹¤ ìƒê°í•œë‹¤.</p>\n<p>ì´ì „ ê²Œì‹œê¸€ë“¤ì„ ì½ì–´ë³´ë©´ ì¶©ë¶„íˆ ë”°ë¼ì˜¬ìˆ˜ ìˆëŠ” ë¶€ë¶„ì´ë¼ ìƒê°í•œë‹¤.</p>\n<p>aws ë¥¼ ì ‘í•˜ë©´ì„œ ì •ë§ í•„ìš”í•˜ê³  í¸ë¦¬í•œ ì„œë¹„ìŠ¤ë¼ëŠ” ìƒê°ì„ ë‹¤ì‹œí•œë²ˆ í•˜ê²Œë˜ì—ˆë‹¤.</p>\n<br>\r\n<br>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#-%EA%B0%9C%EC%9A%94\">âœ… ê°œìš”</a></p>\n</li>\n<li>\n<p><a href=\"#-1%EB%8B%A8%EA%B3%84-%EC%83%98%ED%94%8C-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%9D%B8%EB%8D%B1%EC%8B%B1\">ğŸ§€ 1ë‹¨ê³„: ìƒ˜í”Œ ë°ì´í„° ì¸ë±ì‹±</a></p>\n</li>\n<li>\n<p><a href=\"#-2%EB%8B%A8%EA%B3%84-api-gateway%EC%97%90%EC%84%9C-api-%EC%83%9D%EC%84%B1\">ğŸ¥¨ 2ë‹¨ê³„: API Gatewayì—ì„œ API ìƒì„±</a></p>\n<ul>\n<li><a href=\"#api-%EC%83%9D%EC%84%B1-%EB%B0%8F-%EA%B5%AC%EC%84%B1\">API ìƒì„± ë° êµ¬ì„±</a></li>\n<li><a href=\"#%EB%A9%94%EC%84%9C%EB%93%9C-%EC%9A%94%EC%B2%AD-%EA%B5%AC%EC%84%B1\">ë©”ì„œë“œ ìš”ì²­ êµ¬ì„±</a></li>\n<li><a href=\"#api-%EB%B0%B0%ED%8F%AC-%EB%B0%8F-%EB%8B%A8%EA%B3%84-%EA%B5%AC%EC%84%B1\">API ë°°í¬ ë° ë‹¨ê³„ êµ¬ì„±</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-3%EB%8B%A8%EA%B3%84-lambda-%ED%95%A8%EC%88%98-%EC%83%9D%EC%84%B1-%EB%B0%8F-%EB%B0%B0%ED%8F%AC\">ğŸ” 3ë‹¨ê³„: Lambda í•¨ìˆ˜ ìƒì„± ë° ë°°í¬</a></p>\n<ul>\n<li><a href=\"#lambda-%ED%95%A8%EC%88%98-%EC%83%9D%EC%84%B1\">Lambda í•¨ìˆ˜ ìƒì„±</a></li>\n<li><a href=\"#%ED%95%B8%EB%93%A4%EB%9F%AC-%EC%88%98%EC%A0%95\">í•¸ë“¤ëŸ¬ ìˆ˜ì •</a></li>\n<li><a href=\"#%ED%8A%B8%EB%A6%AC%EA%B1%B0-%EA%B5%AC%EC%84%B1\">íŠ¸ë¦¬ê±° êµ¬ì„±</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-4%EB%8B%A8%EA%B3%84-%EB%8F%84%EB%A9%94%EC%9D%B8-%EC%95%A1%EC%84%B8%EC%8A%A4-%EC%A0%95%EC%B1%85-%EC%88%98%EC%A0%95\">ğŸ¥ 4ë‹¨ê³„: ë„ë©”ì¸ ì•¡ì„¸ìŠ¤ ì •ì±… ìˆ˜ì •</a></p>\n</li>\n<li>\n<p><a href=\"#-5%EB%8B%A8%EA%B3%84-%EC%9B%B9-%EC%95%A0%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98-%ED%85%8C%EC%8A%A4%ED%8A%B8\">ğŸ¥— 5ë‹¨ê³„: ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ í…ŒìŠ¤íŠ¸</a></p>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\">ğŸŒ­ë§ˆë¬´ë¦¬</a></p>\n</li>\n</ul>\n</div>","frontmatter":{"date":"March 22, 2022","title":"OpenSearch ê²€ìƒ‰ ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒì„±","categories":"AWS","author":"ì©¡ê¸°","emoji":"ğŸ”"},"fields":{"slug":"/gatsby-aws-study-opensearch-tuto/"}},"site":{"siteMetadata":{"siteUrl":"https://leesungki.github.io","comments":{"utterances":{"repo":"LeeSungKi/leesungki.github.io"}}}}},"pageContext":{"slug":"/gatsby-aws-study-lambda-import-tutorial/","nextSlug":"/springbootStudyOpensearch/","prevSlug":"/gatsby-aws-study-opensearch-tuto/"}},
    "staticQueryHashes": ["1073350324","1956554647","2938748437"]}