{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/gatsby-springboot-study-secretsManager/",
    "result": {"data":{"cur":{"id":"763b4af4-5037-54ba-9edd-405d62605075","html":"<h2 id=\"-spring-boot-연결하기\" style=\"position:relative;\"><a href=\"#-spring-boot-%EC%97%B0%EA%B2%B0%ED%95%98%EA%B8%B0\" aria-label=\" spring boot 연결하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✅ Spring Boot 연결하기</h2>\n<br>\n<h3 id=\"bootstrapyml-사용\" style=\"position:relative;\"><a href=\"#bootstrapyml-%EC%82%AC%EC%9A%A9\" aria-label=\"bootstrapyml 사용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📌bootstrap.yml 사용</h3>\n<ol>\n<li>의존성 추가</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">dependencies {     \r\n    implementation 'org.springframework.cloud:spring-cloud-starter-bootstrap:3.0.3'     \r\n    implementation 'org.springframework.cloud:spring-cloud-starter-aws-secrets-manager-config:2.2.6.RELEASE' \r\n }</code></pre></div>\n<ol start=\"2\">\n<li>프로젝트 상단에 bootstrap.yml파일을 추가해주고, 아래와 같이 설정</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">aws</span><span class=\"token punctuation\">:</span>\r\n    <span class=\"token key atrule\">secretsmanager</span><span class=\"token punctuation\">:</span>\r\n        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> classificator_dev <span class=\"token comment\">#시크릿 매니저에 설정된 보안 암호 이름</span>\r\n<span class=\"token key atrule\">cloud</span><span class=\"token punctuation\">:</span>\r\n    <span class=\"token key atrule\">aws</span><span class=\"token punctuation\">:</span>\r\n        <span class=\"token key atrule\">region</span><span class=\"token punctuation\">:</span>\r\n            <span class=\"token key atrule\">static</span><span class=\"token punctuation\">:</span> ap<span class=\"token punctuation\">-</span>northeast<span class=\"token punctuation\">-</span><span class=\"token number\">2</span></code></pre></div>\n<p>나의 경우 보안 암호 이름이 /secret/classificator_dev 이다 앞의 /secret는 해당 보안값이 들어가는 prefix 라고 보면된다.\r\n따라서 **/secret/**뒤의 값을 넣어주면 된다.</p>\n<ol start=\"3\">\n<li>시크릿 값 확인</li>\n</ol>\n<p>아래처럼 간편하게 확인 하기위해 컨트롤러를 하나 생성해 주었다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@RestController</span>\r\n<span class=\"token annotation punctuation\">@RequestMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/secrets-check\"</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">CheckController</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token annotation punctuation\">@Value</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"${aws_ac_key}\"</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> aws_ac_key<span class=\"token punctuation\">;</span>\r\n    <span class=\"token annotation punctuation\">@Value</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"${aws_se_key}\"</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> aws_se_key<span class=\"token punctuation\">;</span>\r\n    <span class=\"token annotation punctuation\">@Value</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"${naver_se_key}\"</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> naver_se_key<span class=\"token punctuation\">;</span>\r\n    <span class=\"token annotation punctuation\">@Value</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"${active_check}\"</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> active_check<span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token annotation punctuation\">@GetMapping</span>\r\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">healthCheck</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\r\n\r\n        <span class=\"token keyword\">return</span> <span class=\"token string\">\"\\t\"</span><span class=\"token operator\">+</span><span class=\"token string\">\"aws_ac_key: \"</span><span class=\"token operator\">+</span>aws_ac_key<span class=\"token operator\">+</span><span class=\"token string\">\"\\t\"</span><span class=\"token operator\">+</span><span class=\"token string\">\"aws_se_key: \"</span><span class=\"token operator\">+</span>aws_se_key<span class=\"token operator\">+</span><span class=\"token string\">\"\\t\"</span><span class=\"token operator\">+</span><span class=\"token string\">\"naver_se_key: \"</span><span class=\"token operator\">+</span>naver_se_key<span class=\"token operator\">+</span><span class=\"token string\">\"\\t\"</span><span class=\"token operator\">+</span><span class=\"token string\">\"active_check: \"</span><span class=\"token operator\">+</span>active_check<span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ol start=\"4\">\n<li>포스트맨 호출</li>\n</ol>\n<p>정상적으로 값을 가져오는지 확인한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 24.444444444444443%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAzElEQVQY03XQu07DQBCFYT8oj4ZSUyCa8BIUhBRWIpSkAAkhZHm9Xs+Md65GGCFo+Kq/OsVphlVKKefMzKbm5v+JCERMKXUjH1+HJueMiKWU74k0JADAP2g1/6qufP1AVzfQIAARIRHOVIXZlVfhZqbutiyLu4swq7AIfwUXso8sTd91E0CtUPKY3jsECJ9NBSgAfZqsFB1HYTE1NbOIiCXEXNQadyeqj7tue/dyu2nvt2+7ff+079tDag/982k6X/B0JkSV9ZHlR0R8Am35HCTB9TZ2AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"springbootsm3.png\"\n        title=\"springbootsm3.png\"\n        src=\"/static/e4783735d039e95e0f53f457f10acf67/37523/springbootsm3.png\"\n        srcset=\"/static/e4783735d039e95e0f53f457f10acf67/e9ff0/springbootsm3.png 180w,\n/static/e4783735d039e95e0f53f457f10acf67/f21e7/springbootsm3.png 360w,\n/static/e4783735d039e95e0f53f457f10acf67/37523/springbootsm3.png 720w,\n/static/e4783735d039e95e0f53f457f10acf67/302a4/springbootsm3.png 1080w,\n/static/e4783735d039e95e0f53f457f10acf67/f0811/springbootsm3.png 1367w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>시크릿 매니저에 저장한 값들을 확인할수 있다.</p>\n<p>위와같은 방식은 확실히 간편하고 편하다 하지만 aws 에서 secrets manager를 사용하다보면 rds의 연결 정보라던가 여러 값들을 가져와야하는 경우가 또생긴다.\r\n그렇기땜에 secrets manager값들을 공통으로 받아서 처리할수 있는 부분이 있다면 더편하다.</p>\n<h3 id=\"secretmanagerbuild-class-사용\" style=\"position:relative;\"><a href=\"#secretmanagerbuild-class-%EC%82%AC%EC%9A%A9\" aria-label=\"secretmanagerbuild class 사용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📌SecretManagerBuild class 사용</h3>\n<ol>\n<li>디렉토리 구성</li>\n</ol>\n<p><img src=\"/bb2560a047ef59f1a88629e5e2c277d2/springbootsm4.png\" alt=\"springbootsm4.PNG\"></p>\n<ol start=\"2\">\n<li>AwsSecret class</li>\n</ol>\n<p>시크릿 벨류 매핑</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Getter</span>\r\n<span class=\"token annotation punctuation\">@Setter</span>\r\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AwsSecret</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> aws_ac_key<span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> aws_se_key<span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> naver_se_key<span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> active_check<span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> username<span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> password<span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> host<span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> engine<span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> port<span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> dbInstanceIdentifier<span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ol start=\"3\">\n<li>SecretManagerBuild class</li>\n</ol>\n<p>시크릿매니저 접근후 값을 받아온다. secretName 에는 보안암호 arn 넣어준다 region은 지역(ap-northeast-2)</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">SecretManagerBuild</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">AwsSecret</span> <span class=\"token function\">getSecret</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> secretName<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> region<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">final</span> <span class=\"token class-name\">Gson</span> gson <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Gson</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token class-name\">AWSSecretsManager</span> client  <span class=\"token operator\">=</span> <span class=\"token class-name\">AWSSecretsManagerClientBuilder</span><span class=\"token punctuation\">.</span><span class=\"token function\">standard</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n                <span class=\"token punctuation\">.</span><span class=\"token function\">withRegion</span><span class=\"token punctuation\">(</span>region<span class=\"token punctuation\">)</span>\r\n                <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token class-name\">String</span> secret<span class=\"token punctuation\">,</span> decodedBinarySecret<span class=\"token punctuation\">;</span>\r\n        <span class=\"token class-name\">GetSecretValueRequest</span> getSecretValueRequest <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">GetSecretValueRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n                <span class=\"token punctuation\">.</span><span class=\"token function\">withSecretId</span><span class=\"token punctuation\">(</span>secretName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token class-name\">GetSecretValueResult</span> getSecretValueResult <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\r\n            getSecretValueResult <span class=\"token operator\">=</span> client<span class=\"token punctuation\">.</span><span class=\"token function\">getSecretValue</span><span class=\"token punctuation\">(</span>getSecretValueRequest<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">throw</span> e<span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>getSecretValueResult<span class=\"token punctuation\">.</span><span class=\"token function\">getSecretString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            secret <span class=\"token operator\">=</span> getSecretValueResult<span class=\"token punctuation\">.</span><span class=\"token function\">getSecretString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">return</span> gson<span class=\"token punctuation\">.</span><span class=\"token function\">fromJson</span><span class=\"token punctuation\">(</span>secret<span class=\"token punctuation\">,</span> <span class=\"token class-name\">AwsSecret</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ol start=\"4\">\n<li>secretCheck controller</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@RestController</span>\r\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">CheckController</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token annotation punctuation\">@GetMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/secrets-check2\"</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">ResponseEntity</span> <span class=\"token function\">secretCheck</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\r\n        <span class=\"token class-name\">AwsSecret</span> secretValue <span class=\"token operator\">=</span> <span class=\"token class-name\">SecretManagerBuild</span><span class=\"token punctuation\">.</span><span class=\"token function\">getSecret</span><span class=\"token punctuation\">(</span>\r\n                <span class=\"token string\">\"arn:aws:secretsmanager:ap-northeast-2:040516392204:secret:/secret/classificator_dev-j623rv\"</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token string\">\"ap-northeast-2\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span>secretValue<span class=\"token punctuation\">,</span> <span class=\"token class-name\">HttpStatus</span><span class=\"token punctuation\">.</span>OK<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ol start=\"5\">\n<li>포스트맨 호출</li>\n</ol>\n<p>아래와같이 값이 잘 오는걸 확인할수 있다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.22222222222222%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAwklEQVQY033LMU4DMRBG4T05dDkADUKiSpGGkiIHoEShQTQIpUBIEYH1ru2Z8c4/9hgFavIVr3tDCCHGOYQwjmOMkYhEZPmXEtEU0/qRL7fzwMyqyswppjmmKUViFpFSyl8BqKriRAEzU9jDHpunZQhfRyLKREXFIO7VgGbWf7l7773WCoPW06oGVKswbzaklHMiFDl85ueX6fVtZi5QNO9n1OZlwdB6X1g8j7vd98Vqf3Xzvrk7XN9+3G+PqO3M7+4/yUkcq/1irTcAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"springbootsm5.png\"\n        title=\"springbootsm5.png\"\n        src=\"/static/9ac026a567c4d5ef5ed70a89c561e092/37523/springbootsm5.png\"\n        srcset=\"/static/9ac026a567c4d5ef5ed70a89c561e092/e9ff0/springbootsm5.png 180w,\n/static/9ac026a567c4d5ef5ed70a89c561e092/f21e7/springbootsm5.png 360w,\n/static/9ac026a567c4d5ef5ed70a89c561e092/37523/springbootsm5.png 720w,\n/static/9ac026a567c4d5ef5ed70a89c561e092/302a4/springbootsm5.png 1080w,\n/static/9ac026a567c4d5ef5ed70a89c561e092/b79a5/springbootsm5.png 1372w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2 id=\"마무리\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"마무리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🌭마무리</h2>\n<p>위와 기능을 활용하여 Secrets Manager를 사용하여 aws의 서비스를 사용하자.</p>\n<br>\r\n<br>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#-spring-boot-%EC%97%B0%EA%B2%B0%ED%95%98%EA%B8%B0\">✅ Spring Boot 연결하기</a></p>\n<ul>\n<li><a href=\"#bootstrapyml-%EC%82%AC%EC%9A%A9\">📌bootstrap.yml 사용</a></li>\n<li><a href=\"#secretmanagerbuild-class-%EC%82%AC%EC%9A%A9\">📌SecretManagerBuild class 사용</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\">🌭마무리</a></p>\n</li>\n</ul>\n</div>","excerpt":"✅ Spring Boot 연결하기 📌bootstrap.yml 사용 의존성 추가 프로젝트 상단에 bootstrap.yml파일을 추가해주고, 아래와 같이 설정 나의 경우 보안 암호 이름이 /secret/classificator_dev 이다 앞의 /secret는 해당 보안값이 들어가는 prefix 라고 보면된다.\r\n따라서 **/secret/**뒤의 값을 넣어주면 된다. 시크릿 값 확인 아래처럼 간편하게 확인 하기위해 컨트롤러를 하나 생성해 주었다. 포스트맨 호출 정상적으로 값을 가져오는지 확인한다.  시크릿 매니저에 저장한 값들을 확인할수 있다. 위와같은 방식은 확실히 간편하고 편하다 하지만 aws 에서 secrets manager를 사용하다보면 rds의 연결 정보라던가 여러 값들을 가져와야하는 경우가 또생긴다.\r\n그렇기땜에 secrets manager값들을 공통으로 받아서 처리할수 있는 부분이 있다면 더편하다. 📌SecretManagerBuild class 사용 디렉토리 구성 spri…","frontmatter":{"date":"February 23, 2022","title":"Spring Boot AWS Secrets Manager 연동","categories":"SpringBoot","author":"쩡기","emoji":"🔐"},"fields":{"slug":"/gatsby-springboot-study-secretsManager/"}},"next":{"id":"abb1d5e2-c11f-54ba-8d1b-cf14ff9e9545","html":"<h2 id=\"-aws-secrets-manager-생성-튜토리얼\" style=\"position:relative;\"><a href=\"#-aws-secrets-manager-%EC%83%9D%EC%84%B1-%ED%8A%9C%ED%86%A0%EB%A6%AC%EC%96%BC\" aria-label=\" aws secrets manager 생성 튜토리얼 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🔒 AWS Secrets Manager 생성 튜토리얼</h2>\n<br>\n<h3 id=\"민감성-데이터-저장-방식ex-tokenaccesskeysecretkey\" style=\"position:relative;\"><a href=\"#%EB%AF%BC%EA%B0%90%EC%84%B1-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%A0%80%EC%9E%A5-%EB%B0%A9%EC%8B%9Dex-tokenaccesskeysecretkey\" aria-label=\"민감성 데이터 저장 방식ex tokenaccesskeysecretkey permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🍕민감성 데이터 저장 방식(ex token,accesskey,secretkey…)</h3>\n<ol>\n<li>AWS 콘솔에서 Secrets Manager 콘솔 접근</li>\n</ol>\n<br>\n<p><img src=\"/1b508da11c907bf5bdff8de4e67e02ad/sm1.png\" alt=\"sm1.PNG\"></p>\n<ol start=\"2\">\n<li>새 보안 암호 저장 클릭</li>\n</ol>\n<br>\n<p><img src=\"/aa03e8092357155410a54a3b58c470e9/sm2.png\" alt=\"sm2.PNG\"></p>\n<ol start=\"3\">\n<li>다른 유형의 보안 암호 체크 키/값 정의 후 다음 클릭</li>\n</ol>\n<br>\n<p><img src=\"/510128fefad91d2c6a69c83b5dd929bf/sm3.png\" alt=\"sm3.PNG\"></p>\n<ol start=\"4\">\n<li>보안 암호 이름 지정 후 다음 클릭</li>\n</ol>\n<br>\n<p><img src=\"/73b4e0f4cbe483211ff93d080f76efd6/sm4.png\" alt=\"sm4.PNG\"></p>\n<ol start=\"5\">\n<li>여기에서는 자동 교체는 정의 안하므로 기본으로 지정 다음 클릭</li>\n</ol>\n<br>\n<p><img src=\"/0667309f12fd03561a9e919090105d36/sm5.png\" alt=\"sm5.PNG\"></p>\n<ol start=\"6\">\n<li>검토 확인후 저장 클릭</li>\n</ol>\n<br>\n<p><img src=\"/9da6fce2aad126ec340f605c9081d36e/sm6.png\" alt=\"sm6.PNG\"></p>\n<ol start=\"7\">\n<li>생성된 보안 암호 이름을 확인 할수 있다</li>\n</ol>\n<br>\n<p><img src=\"/a56af387d34e4e098ef27132085e8df5/sm7.png\" alt=\"sm7.PNG\"></p>\n<h3 id=\"rds-데이터-베이스에-대한-자격증명-방식\" style=\"position:relative;\"><a href=\"#rds-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EB%B2%A0%EC%9D%B4%EC%8A%A4%EC%97%90-%EB%8C%80%ED%95%9C-%EC%9E%90%EA%B2%A9%EC%A6%9D%EB%AA%85-%EB%B0%A9%EC%8B%9D\" aria-label=\"rds 데이터 베이스에 대한 자격증명 방식 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🍕RDS 데이터 베이스에 대한 자격증명 방식</h3>\n<ol>\n<li>AWS 콘솔에서 Secrets Manager 콘솔 접근</li>\n</ol>\n<br>\n<p><img src=\"/1b508da11c907bf5bdff8de4e67e02ad/sm1.png\" alt=\"sm1.PNG\"></p>\n<ol start=\"2\">\n<li>새 보안 암호 저장 클릭</li>\n</ol>\n<br>\n<p><img src=\"/aa03e8092357155410a54a3b58c470e9/sm2.png\" alt=\"sm2.PNG\"></p>\n<ol start=\"3\">\n<li>Amazon RDS 데이터 베이스에 대한 자격증명 체크 RDS(생성시 지정한) 사용자 이름과 암호 기재 DB 인스턴스 체크</li>\n</ol>\n<br>\n<p><img src=\"/cd5673c987bd22a648d2d3d9d91aa53a/smrd1.png\" alt=\"smrd1.PNG\"></p>\n<ol start=\"4\">\n<li>보안 암호 이름 지정 후 다음 클릭</li>\n</ol>\n<br>\n<p><img src=\"/6b734be85e3e249ef80e97a62a2ca9e2/smrd2.png\" alt=\"smrd2.PNG\"></p>\n<ol start=\"5\">\n<li>여기에서는 자동 교체는 정의 안하므로 기본으로 지정 다음 클릭</li>\n</ol>\n<br>\n<p><img src=\"/0667309f12fd03561a9e919090105d36/sm5.png\" alt=\"sm5.PNG\"></p>\n<ol start=\"6\">\n<li>검토 확인후 저장 클릭</li>\n</ol>\n<br>\n<p><img src=\"/fdaecd7e412838a1e498aa85e4cf00f0/smrd3.png\" alt=\"smrd3.PNG\"></p>\n<ol start=\"7\">\n<li>생성된 보안 암호 이름을 확인 할수 있다</li>\n</ol>\n<br>\n<p><img src=\"/446a25dd693301398b307ccab627f4f2/smrd4.png\" alt=\"smrd4.PNG\"></p>\n<h2 id=\"마무리\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"마무리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🌭마무리</h2>\n<p>위와 같은 특성과 기능을 제공하므로 Secrets Manager를 사용하여 aws의 접근에 관한 민감성 데이터를 손쉽게 관리가 가능하다.\r\n<br>\r\n<br></p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#-aws-secrets-manager-%EC%83%9D%EC%84%B1-%ED%8A%9C%ED%86%A0%EB%A6%AC%EC%96%BC\">🔒 AWS Secrets Manager 생성 튜토리얼</a></p>\n<ul>\n<li><a href=\"#%EB%AF%BC%EA%B0%90%EC%84%B1-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%A0%80%EC%9E%A5-%EB%B0%A9%EC%8B%9Dex-tokenaccesskeysecretkey\">🍕민감성 데이터 저장 방식(ex token,accesskey,secretkey…)</a></li>\n<li><a href=\"#rds-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EB%B2%A0%EC%9D%B4%EC%8A%A4%EC%97%90-%EB%8C%80%ED%95%9C-%EC%9E%90%EA%B2%A9%EC%A6%9D%EB%AA%85-%EB%B0%A9%EC%8B%9D\">🍕RDS 데이터 베이스에 대한 자격증명 방식</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\">🌭마무리</a></p>\n</li>\n</ul>\n</div>","frontmatter":{"date":"February 23, 2022","title":"AWS Secrets Manager 생성","categories":"AWS","author":"쩡기","emoji":"🔑"},"fields":{"slug":"/gatsby-aws-study-secretsManager-tutorial/"}},"prev":{"id":"16ca4d83-108f-5460-9d87-c50a3adf1a07","html":"<h2 id=\"-aws-rdsmy-sql-연결하기\" style=\"position:relative;\"><a href=\"#-aws-rdsmy-sql-%EC%97%B0%EA%B2%B0%ED%95%98%EA%B8%B0\" aria-label=\" aws rdsmy sql 연결하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✅ aws RDS(MY SQL) 연결하기</h2>\n<br>\n<h3 id=\"datasource-사용\" style=\"position:relative;\"><a href=\"#datasource-%EC%82%AC%EC%9A%A9\" aria-label=\"datasource 사용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📌datasource 사용</h3>\n<ol>\n<li>intellj 오른쪽 상단에 datasource 탭 클릭</li>\n</ol>\n<p><img src=\"/8da521cc4551bbbab8075c64e56ceef3/intellij1.png\" alt=\"intellij1.PNG\"></p>\n<ol start=\"2\">\n<li>좌측 + 버튼 클릭후 data source에서  mySQL 선택</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 646px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 109.44444444444446%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAABJ0AAASdAHeZh94AAACW0lEQVQ4y6WVy27TQBiF/TaoSYRURBeNx3O/20lDiSpRIVgkUqUC4hFgV8EaCou+60EzdpxL0wvt4tdESebzOf/NhXYGSkuMy2OUVQlCxiBViYoJECZRpqB8KwjjOCYUcXICaSwol+DKQkiBQr25gJ9fQs0vYd59hZt/Rjj7BOMjpPEgKoBkiNiKBB5XLEf7mYJLg2L+4TtOlz9wsvyJ+PEK+v0VzPk3cOUgtQETag3KYIlK6E7pGp5Ul0ygkI7BeANjLVxw4IKBVARSKRgXoF3YVsdvA1dQqiwKHgJsbOBCAxNq2FCDCgWqI6T1UDYptb2KXYWbJ5MahTQu58v6CBebHkjMBL6e5u9CPUHFZXf5LsvtWSilszXa5SpdTCGUzXAXayjrNy4+ACRuBhOnfb6EthkYGwEfY1ZPhczVJI8CCgMqdPafIilNQO5ctpuAvm428vgQkLI9jStAzAyunsKGmK2nHFe8BdwP3NOwSaFtThGaKZRxffM+TuFeoEBdV3CxVddX+MlAJtHICB+arNL48B9V3gNMZ7QaPtR9sZ4FTJZZELBdD24X7EkKJUQ8h3ZxY0KeYzlVeXYG31V592H3Anf7b2VZR982djeWa8Dt5XAncPNHITV8nOQcttOj2vHbAJb7gLuWVwvCagMf23UWmkmemLTuq7REhO5W2fa99MAire6tILR9ojOwefQa0DTjUoMr0wKTWkLbV0B3Jhd5Hw6HQ/QxGmE4OMDLwyPo5S+8/XKD5uIv7OIabnENu/gDv/yNozHHwcELjNL/RyMMBgMcvnoNpgL+AWA5CH02t+f8AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"intelli2.png\"\n        title=\"intelli2.png\"\n        src=\"/static/900e25f00f38d667a5743185c381dffe/27524/intellj2.png\"\n        srcset=\"/static/900e25f00f38d667a5743185c381dffe/e9ff0/intellj2.png 180w,\n/static/900e25f00f38d667a5743185c381dffe/f21e7/intellj2.png 360w,\n/static/900e25f00f38d667a5743185c381dffe/27524/intellj2.png 646w\"\n        sizes=\"(max-width: 646px) 100vw, 646px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ol start=\"3\">\n<li>data source 정보를 넣고 test connection 클릭</li>\n</ol>\n<ul>\n<li>name:사용자지정</li>\n<li>Host:생성한 RDS의 엔드포인트</li>\n<li>Port:생성한 RDS의 Port</li>\n<li>User:생성한 RDS의 User</li>\n<li>Password:생성한 RDS의 Password</li>\n</ul>\n<p><img src=\"/cbb5013454e7fac1db5c11f1ffc30ddf/intellij3.png\" alt=\"intellij3.PNG\"></p>\n<p>테스트가 성공적으로 이루어 졌으면 OK 버튼 클릭</p>\n<ol start=\"4\">\n<li>쿼리 콘솔 확인</li>\n</ol>\n<p>정상적으로 다했으면 아래와 같이 쿼리를 작성할수 있는 콘솔이 열린다.</p>\n<p><img src=\"/dfb10b8ffea858c49ab491c856897d4f/intellij4.png\" alt=\"intellij4.PNG\"></p>\n<h2 id=\"마무리\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"마무리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🌭마무리</h2>\n<p>위의 기능을 활용하여 aws rds에 쉽게 접근하여 쿼리작성이 가능하다.</p>\n<br>\r\n<br>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#-aws-rdsmy-sql-%EC%97%B0%EA%B2%B0%ED%95%98%EA%B8%B0\">✅ aws RDS(MY SQL) 연결하기</a></p>\n<ul>\n<li><a href=\"#datasource-%EC%82%AC%EC%9A%A9\">📌datasource 사용</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\">🌭마무리</a></p>\n</li>\n</ul>\n</div>","frontmatter":{"date":"February 24, 2022","title":"Intellij AWS RDS 연동","categories":"Intellij","author":"쩡기","emoji":"🏳"},"fields":{"slug":"/gatsby-springboot-study-intellij/"}},"site":{"siteMetadata":{"siteUrl":"https://leesungki.github.io","comments":{"utterances":{"repo":"LeeSungKi/leesungki.github.io"}}}}},"pageContext":{"slug":"/gatsby-springboot-study-secretsManager/","nextSlug":"/gatsby-aws-study-secretsManager-tutorial/","prevSlug":"/gatsby-springboot-study-intellij/"}},
    "staticQueryHashes": ["1073350324","1956554647","2938748437"]}