{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/springbootStudyOpensearch/",
    "result": {"data":{"cur":{"id":"77e44115-66ac-56f1-871a-acebcfc7632f","html":"<h2 id=\"-ê°œìš”\" style=\"position:relative;\"><a href=\"#-%EA%B0%9C%EC%9A%94\" aria-label=\" ê°œìš” permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>âœ… ê°œìš”</h2>\n<p>AWS ì˜ OpenSearchì— ì ‘ê·¼í•˜ì—¬ ë°ì´í„°ë¥¼ ìƒì„±í•´ë³´ì.</p>\n<blockquote>\n<p>Aws OpenSearch(Elasticsearch) ê´€ë ¨ í¬ìŠ¤íŒ…ì€ <a href=\"https://leesungki.github.io/gatsby-aws-history-of-opensearch-tuto\">ì—¬ê¸°</a>ë¥¼ ì°¸ê³ í•˜ì</p>\n</blockquote>\n<h3 id=\"aws-opensearch-ì—°ë™\" style=\"position:relative;\"><a href=\"#aws-opensearch-%EC%97%B0%EB%8F%99\" aria-label=\"aws opensearch ì—°ë™ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>AWS OpenSearch ì—°ë™</h3>\n<p>ê¸°ë³¸ í”„ë¡œì íŠ¸ êµ¬ì¡°</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">infra\r\n    ã„´aws\r\n        ã„´AWSRequestSigningApacheInterceptor\r\ncontroller\r\n    ã„´DataCheckController        </code></pre></div>\n<ol>\n<li>ì˜ì¡´ì„± ì¶”ê°€</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">dependencies {    \r\n    implementation group: 'org.opensearch.client', name: 'opensearch-rest-high-level-client', version: '1.2.4'\r\n}</code></pre></div>\n<ol start=\"2\">\n<li>AWSRequestSigningApacheInterceptor ì¶”ê°€</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">/**\r\n * An {@link HttpRequestInterceptor} that signs requests using any AWS {@link Signer}\r\n * and {@link AWSCredentialsProvider}.\r\n */</span>\r\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AWSRequestSigningApacheInterceptor</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">HttpRequestInterceptor</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token comment\">/**\r\n     * The service that we're connecting to. Technically not necessary.\r\n     * Could be used by a future Signer, though.\r\n     */</span>\r\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> service<span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token comment\">/**\r\n     * The particular signer implementation.\r\n     */</span>\r\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Signer</span> signer<span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token comment\">/**\r\n     * The source of AWS credentials for signing.\r\n     */</span>\r\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">AWSCredentialsProvider</span> awsCredentialsProvider<span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token comment\">/**\r\n     *\r\n     * @param service service that we're connecting to\r\n     * @param signer particular signer implementation\r\n     * @param awsCredentialsProvider source of AWS credentials for signing\r\n     */</span>\r\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">AWSRequestSigningApacheInterceptor</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> service<span class=\"token punctuation\">,</span>\r\n                                              <span class=\"token keyword\">final</span> <span class=\"token class-name\">Signer</span> signer<span class=\"token punctuation\">,</span>\r\n                                              <span class=\"token keyword\">final</span> <span class=\"token class-name\">AWSCredentialsProvider</span> awsCredentialsProvider<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>service <span class=\"token operator\">=</span> service<span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>signer <span class=\"token operator\">=</span> signer<span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>awsCredentialsProvider <span class=\"token operator\">=</span> awsCredentialsProvider<span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n    <span class=\"token comment\">/**\r\n     * {@inheritDoc}\r\n     */</span>\r\n    <span class=\"token annotation punctuation\">@Override</span>\r\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">process</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">HttpRequest</span> request<span class=\"token punctuation\">,</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">HttpContext</span> context<span class=\"token punctuation\">)</span>\r\n            <span class=\"token keyword\">throws</span> <span class=\"token class-name\">HttpException</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">IOException</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token class-name\">URIBuilder</span> uriBuilder<span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\r\n            uriBuilder <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">URIBuilder</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span><span class=\"token function\">getRequestLine</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getUri</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">URISyntaxException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">IOException</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Invalid URI\"</span> <span class=\"token punctuation\">,</span> e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n\r\n        <span class=\"token comment\">// Copy Apache HttpRequest to AWS DefaultRequest</span>\r\n        <span class=\"token class-name\">DefaultRequest</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token operator\">?</span><span class=\"token punctuation\">></span></span> signableRequest <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DefaultRequest</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span>service<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token class-name\">HttpHost</span> host <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpHost</span><span class=\"token punctuation\">)</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">getAttribute</span><span class=\"token punctuation\">(</span>HTTP_TARGET_HOST<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>host <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            signableRequest<span class=\"token punctuation\">.</span><span class=\"token function\">setEndpoint</span><span class=\"token punctuation\">(</span>URI<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>host<span class=\"token punctuation\">.</span><span class=\"token function\">toURI</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n        <span class=\"token keyword\">final</span> <span class=\"token class-name\">HttpMethodName</span> httpMethod <span class=\"token operator\">=</span>\r\n                <span class=\"token class-name\">HttpMethodName</span><span class=\"token punctuation\">.</span><span class=\"token function\">fromValue</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span><span class=\"token function\">getRequestLine</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getMethod</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        signableRequest<span class=\"token punctuation\">.</span><span class=\"token function\">setHttpMethod</span><span class=\"token punctuation\">(</span>httpMethod<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\r\n            signableRequest<span class=\"token punctuation\">.</span><span class=\"token function\">setResourcePath</span><span class=\"token punctuation\">(</span>uriBuilder<span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getRawPath</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">URISyntaxException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">IOException</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Invalid URI\"</span> <span class=\"token punctuation\">,</span> e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n\r\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>request <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">HttpEntityEnclosingRequest</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token class-name\">HttpEntityEnclosingRequest</span> httpEntityEnclosingRequest <span class=\"token operator\">=</span>\r\n                    <span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpEntityEnclosingRequest</span><span class=\"token punctuation\">)</span> request<span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>httpEntityEnclosingRequest<span class=\"token punctuation\">.</span><span class=\"token function\">getEntity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                signableRequest<span class=\"token punctuation\">.</span><span class=\"token function\">setContent</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">ByteArrayInputStream</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token keyword\">byte</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\r\n                signableRequest<span class=\"token punctuation\">.</span><span class=\"token function\">setContent</span><span class=\"token punctuation\">(</span>httpEntityEnclosingRequest<span class=\"token punctuation\">.</span><span class=\"token function\">getEntity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getContent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span>\r\n        signableRequest<span class=\"token punctuation\">.</span><span class=\"token function\">setParameters</span><span class=\"token punctuation\">(</span><span class=\"token function\">nvpToMapParams</span><span class=\"token punctuation\">(</span>uriBuilder<span class=\"token punctuation\">.</span><span class=\"token function\">getQueryParams</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        signableRequest<span class=\"token punctuation\">.</span><span class=\"token function\">setHeaders</span><span class=\"token punctuation\">(</span><span class=\"token function\">headerArrayToMap</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span><span class=\"token function\">getAllHeaders</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token comment\">// Sign it</span>\r\n        signer<span class=\"token punctuation\">.</span><span class=\"token function\">sign</span><span class=\"token punctuation\">(</span>signableRequest<span class=\"token punctuation\">,</span> awsCredentialsProvider<span class=\"token punctuation\">.</span><span class=\"token function\">getCredentials</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token comment\">// Now copy everything back</span>\r\n        request<span class=\"token punctuation\">.</span><span class=\"token function\">setHeaders</span><span class=\"token punctuation\">(</span><span class=\"token function\">mapToHeaderArray</span><span class=\"token punctuation\">(</span>signableRequest<span class=\"token punctuation\">.</span><span class=\"token function\">getHeaders</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>request <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">HttpEntityEnclosingRequest</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token class-name\">HttpEntityEnclosingRequest</span> httpEntityEnclosingRequest <span class=\"token operator\">=</span>\r\n                    <span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpEntityEnclosingRequest</span><span class=\"token punctuation\">)</span> request<span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>httpEntityEnclosingRequest<span class=\"token punctuation\">.</span><span class=\"token function\">getEntity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token class-name\">BasicHttpEntity</span> basicHttpEntity <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">BasicHttpEntity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                basicHttpEntity<span class=\"token punctuation\">.</span><span class=\"token function\">setContent</span><span class=\"token punctuation\">(</span>signableRequest<span class=\"token punctuation\">.</span><span class=\"token function\">getContent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                httpEntityEnclosingRequest<span class=\"token punctuation\">.</span><span class=\"token function\">setEntity</span><span class=\"token punctuation\">(</span>basicHttpEntity<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span>\r\n    <span class=\"token comment\">/**\r\n     *\r\n     * @param params list of HTTP query params as NameValuePairs\r\n     * @return a multimap of HTTP query params\r\n     */</span>\r\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">List</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span><span class=\"token punctuation\">></span></span> <span class=\"token function\">nvpToMapParams</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">NameValuePair</span><span class=\"token punctuation\">></span></span> params<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">List</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span><span class=\"token punctuation\">></span></span> parameterMap <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">TreeMap</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">.</span>CASE_INSENSITIVE_ORDER<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">NameValuePair</span> nvp <span class=\"token operator\">:</span> params<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> argsList <span class=\"token operator\">=</span>\r\n                    parameterMap<span class=\"token punctuation\">.</span><span class=\"token function\">computeIfAbsent</span><span class=\"token punctuation\">(</span>nvp<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> k <span class=\"token operator\">-></span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            argsList<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>nvp<span class=\"token punctuation\">.</span><span class=\"token function\">getValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n        <span class=\"token keyword\">return</span> parameterMap<span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n    <span class=\"token comment\">/**\r\n     * @param headers modeled Header objects\r\n     * @return a Map of header entries\r\n     */</span>\r\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">headerArrayToMap</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">Header</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> headers<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> headersMap <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">TreeMap</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">.</span>CASE_INSENSITIVE_ORDER<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Header</span> header <span class=\"token operator\">:</span> headers<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">skipHeader</span><span class=\"token punctuation\">(</span>header<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                headersMap<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span>header<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> header<span class=\"token punctuation\">.</span><span class=\"token function\">getValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span>\r\n        <span class=\"token keyword\">return</span> headersMap<span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n    <span class=\"token comment\">/**\r\n     * @param header header line to check\r\n     * @return true if the given header should be excluded when signing\r\n     */</span>\r\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">skipHeader</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">Header</span> header<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"content-length\"</span><span class=\"token punctuation\">.</span><span class=\"token function\">equalsIgnoreCase</span><span class=\"token punctuation\">(</span>header<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n                <span class=\"token operator\">&amp;&amp;</span> <span class=\"token string\">\"0\"</span><span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span>header<span class=\"token punctuation\">.</span><span class=\"token function\">getValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// Strip Content-Length: 0</span>\r\n                <span class=\"token operator\">||</span> <span class=\"token string\">\"host\"</span><span class=\"token punctuation\">.</span><span class=\"token function\">equalsIgnoreCase</span><span class=\"token punctuation\">(</span>header<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Host comes from endpoint</span>\r\n    <span class=\"token punctuation\">}</span>\r\n    <span class=\"token comment\">/**\r\n     * @param mapHeaders Map of header entries\r\n     * @return modeled Header objects\r\n     */</span>\r\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">Header</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token function\">mapToHeaderArray</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> mapHeaders<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token class-name\">Header</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> headers <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Header</span><span class=\"token punctuation\">[</span>mapHeaders<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Map<span class=\"token punctuation\">.</span>Entry</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> headerEntry <span class=\"token operator\">:</span> mapHeaders<span class=\"token punctuation\">.</span><span class=\"token function\">entrySet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            headers<span class=\"token punctuation\">[</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">BasicHeader</span><span class=\"token punctuation\">(</span>headerEntry<span class=\"token punctuation\">.</span><span class=\"token function\">getKey</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> headerEntry<span class=\"token punctuation\">.</span><span class=\"token function\">getValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n        <span class=\"token keyword\">return</span> headers<span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><a href=\"https://github.com/amazon-archives/aws-request-signing-apache-interceptor\">ì°¸ê³ </a></p>\n<ol start=\"3\">\n<li>DataCheckController</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Slf4j</span>\r\n<span class=\"token annotation punctuation\">@RestController</span>\r\n<span class=\"token annotation punctuation\">@RequestMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/api/v1\"</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">DataCheckController</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token comment\">/**\r\n     * aws ê°€ìš© ì§€ì—­\r\n     */</span>\r\n    <span class=\"token annotation punctuation\">@Value</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"${cloud.aws.region.static}\"</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> region<span class=\"token punctuation\">;</span><span class=\"token comment\">//ap-northeast-2 ì„œìš¸ë¦¬ì „</span>\r\n\r\n    <span class=\"token annotation punctuation\">@GetMapping</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"/search1\"</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">search1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">IOException</span> <span class=\"token punctuation\">{</span>\r\n        log<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"------------------------------------->search1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token class-name\">RestHighLevelClient</span> searchClient <span class=\"token operator\">=</span> <span class=\"token function\">searchClient</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token comment\">// Create the document as a hash map</span>\r\n        <span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">></span></span> document <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HashMap</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        document<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"title\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Walk the Line\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        document<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"director\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"James Mangold\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        document<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"year\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"2005\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        log<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"------------------------------------->Map\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token comment\">// Form the indexing request, send it, and print the response</span>\r\n        <span class=\"token class-name\">IndexRequest</span> request <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">IndexRequest</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"my-index\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"_doc\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">source</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token class-name\">IndexResponse</span> response <span class=\"token operator\">=</span> searchClient<span class=\"token punctuation\">.</span><span class=\"token function\">index</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> <span class=\"token class-name\">RequestOptions</span><span class=\"token punctuation\">.</span>DEFAULT<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"response=========>\"</span><span class=\"token operator\">+</span>response<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"response Result=========>\"</span><span class=\"token operator\">+</span>response<span class=\"token punctuation\">.</span><span class=\"token function\">getIndex</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">return</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token punctuation\">}</span>\r\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">String</span> serviceName <span class=\"token operator\">=</span> <span class=\"token string\">\"es\"</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">String</span> host <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// e.g. https://search-mydomain.us-west-1.es.amazonaws.com ì•¤ë“œí¬ì¸íŠ¸</span>\r\n\r\n    <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">AWSCredentialsProvider</span> credentialsProvider <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DefaultAWSCredentialsProviderChain</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">RestHighLevelClient</span> <span class=\"token function\">searchClient</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        log<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"------------------------------------->RestHighLevelClient\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token class-name\">AWS4Signer</span> signer <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AWS4Signer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        signer<span class=\"token punctuation\">.</span><span class=\"token function\">setServiceName</span><span class=\"token punctuation\">(</span>serviceName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        signer<span class=\"token punctuation\">.</span><span class=\"token function\">setRegionName</span><span class=\"token punctuation\">(</span>region<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token class-name\">HttpRequestInterceptor</span> interceptor <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AWSRequestSigningApacheInterceptor</span><span class=\"token punctuation\">(</span>serviceName<span class=\"token punctuation\">,</span> signer<span class=\"token punctuation\">,</span> credentialsProvider<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RestHighLevelClient</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">RestClient</span><span class=\"token punctuation\">.</span><span class=\"token function\">builder</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpHost</span><span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>host<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">setHttpClientConfigCallback</span><span class=\"token punctuation\">(</span>hacb <span class=\"token operator\">-></span> hacb<span class=\"token punctuation\">.</span><span class=\"token function\">addInterceptorLast</span><span class=\"token punctuation\">(</span>interceptor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>   \r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ol start=\"4\">\n<li>í¬ìŠ¤íŠ¸ë§¨ í˜¸ì¶œ</li>\n</ol>\n<p><img src=\"/1c399e99d3045f45524e33758357817b/sbes1.png\" alt=\"sbes1.PNG\"></p>\n<ol start=\"5\">\n<li>í‚¤ë°”ë‚˜ í™•ì¸</li>\n</ol>\n<p><img src=\"/d6c68d61e4c9a5620163f5436167349d/sbes2.png\" alt=\"sbes2.PNG\"></p>\n<h2 id=\"ë§ˆë¬´ë¦¬\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"ë§ˆë¬´ë¦¬ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸŒ­ë§ˆë¬´ë¦¬</h2>\n<p>ìœ„ì™€ ê°™ì´ springbootì—ì„œ OpenSearch(Elasticsearch)ì— ì¸ë±ìŠ¤ë¥¼ ìƒì„±í•´ì£¼ì—ˆê³  í™•ì¸ê¹Œì§€ í• ìˆ˜ ìˆì—ˆë‹¤.</p>\n<p>ë‹¤ìŒì—ëŠ” OpenSearch(Elasticsearch)ë¥¼ í™œìš©í•œ ê°„ë‹¨í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë§Œë“¤ì–´ ë³´ì.</p>\n<br>\r\n<br>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#-%EA%B0%9C%EC%9A%94\">âœ… ê°œìš”</a></p>\n<ul>\n<li><a href=\"#aws-opensearch-%EC%97%B0%EB%8F%99\">AWS OpenSearch ì—°ë™</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\">ğŸŒ­ë§ˆë¬´ë¦¬</a></p>\n</li>\n</ul>\n</div>","excerpt":"âœ… ê°œìš” AWS ì˜ OpenSearchì— ì ‘ê·¼í•˜ì—¬ ë°ì´í„°ë¥¼ ìƒì„±í•´ë³´ì. Aws OpenSearch(Elasticsearch) ê´€ë ¨ í¬ìŠ¤íŒ…ì€ ì—¬ê¸°ë¥¼ ì°¸ê³ í•˜ì AWS OpenSearch ì—°ë™ ê¸°ë³¸ í”„ë¡œì íŠ¸ êµ¬ì¡° ì˜ì¡´ì„± ì¶”ê°€ AWSRequestSigningApacheInterceptor ì¶”ê°€ ì°¸ê³  DataCheckController í¬ìŠ¤íŠ¸ë§¨ í˜¸ì¶œ sbes1.PNG í‚¤ë°”ë‚˜ í™•ì¸ sbes2.PNG ğŸŒ­ë§ˆë¬´ë¦¬ ìœ„ì™€ ê°™ì´ springbootì—ì„œ OpenSearch(Elasticsearch)ì— ì¸ë±ìŠ¤ë¥¼ ìƒì„±í•´ì£¼ì—ˆê³  í™•ì¸ê¹Œì§€ í• ìˆ˜ ìˆì—ˆë‹¤. ë‹¤ìŒì—ëŠ” OpenSearch(Elasticsearch)ë¥¼ í™œìš©í•œ ê°„ë‹¨í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë§Œë“¤ì–´ ë³´ì. âœ… ê°œìš” AWS OpenSearch ì—°ë™ ğŸŒ­ë§ˆë¬´ë¦¬","frontmatter":{"date":"March 15, 2022","title":"Spring Boot + Aws OpenSearch(Elasticsearch) ì—°ë™","categories":"SpringBoot","author":"ì©¡ê¸°","emoji":"ğŸ§™â€â™‚ï¸"},"fields":{"slug":"/springbootStudyOpensearch/"}},"next":{"id":"827dc8e6-9546-5d1a-acd2-244741cf2d61","html":"<h2 id=\"-ê°œìš”\" style=\"position:relative;\"><a href=\"#-%EA%B0%9C%EC%9A%94\" aria-label=\" ê°œìš” permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸˆ ê°œìš”</h2>\n<p>ë‚´ê°€ ì§„í–‰í•œ í”„ë¡œì íŠ¸ ì—ì„œ ê²€ìƒ‰ ì—”ì§„ìœ¼ë¡œ ì˜¤í”ˆì„œì¹˜ë¥¼ ì„ íƒí•˜ì—¬ ì‚¬ìš©í•´ì•¼í•˜ëŠ” ìƒí™©ì´ ìˆì—ˆë‹¤.\r\ní•´ë‹¹ ë¶€ë¶„ì€ ì‚¬ì‹¤ ì¸í”„ë¼ì—ì„œ ì§„í–‰í•˜ì˜€ì§€ë§Œ ì§„í–‰ì¤‘ ê³µë¶€í•œ ë‚´ìš©ë“¤ì„ ê¸°ì¬ í•˜ë ¤í•œë‹¤.\r\nì´ë²ˆ ê¸€ì—ì„œëŠ” ê°„ë‹¨í•˜ê²Œ ë„ë©”ì¸ ìƒì„±ê³¼ í‚¤ë°”ë‚˜ì ‘ì†ë“± ê¸°ë³¸ì ì¸ ë‚´ìš©ë§Œ ë‹¤ë£° ì˜ˆì •ì´ë‹¤.</p>\n<h2 id=\"-amazon-opensearch-service-ì‹œì‘í•˜ê¸°\" style=\"position:relative;\"><a href=\"#-amazon-opensearch-service-%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0\" aria-label=\" amazon opensearch service ì‹œì‘í•˜ê¸° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸš€ Amazon OpenSearch Service ì‹œì‘í•˜ê¸°</h2>\n<p>Amazon OpenSearch Serviceë¥¼ ì‚¬ìš©í•˜ì—¬ í…ŒìŠ¤íŠ¸ ë„ë©”ì¸ì„ ë§Œë“¤ê³  êµ¬ì„±í•˜ëŠ” ë°©ë²•ì„ ì§„í–‰í•´ ë³´ì</p>\n<p>OpenSearch Service ë„ë©”ì¸ì€ OpenSearch í´ëŸ¬ìŠ¤í„°ì™€ ë™ì˜ì–´ì…ë‹ˆë‹¤.</p>\n<p>ë„ë©”ì¸ì€ ì„¤ì •, ì¸ìŠ¤í„´ìŠ¤ ìœ í˜•, ì¸ìŠ¤í„´ìŠ¤ ìˆ˜, ìŠ¤í† ë¦¬ì§€ ë¦¬ì†ŒìŠ¤ë¥¼ ì§€ì •í•œ ì„¤ì •ì…ë‹ˆë‹¤.</p>\n<h3 id=\"-1ë‹¨ê³„-opensearch-service-ë„ë©”ì¸-ìƒì„±\" style=\"position:relative;\"><a href=\"#-1%EB%8B%A8%EA%B3%84-opensearch-service-%EB%8F%84%EB%A9%94%EC%9D%B8-%EC%83%9D%EC%84%B1\" aria-label=\" 1ë‹¨ê³„ opensearch service ë„ë©”ì¸ ìƒì„± permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ¦– 1ë‹¨ê³„: OpenSearch Service ë„ë©”ì¸ ìƒì„±</h3>\n<p><strong>ì½˜ì†”ì„ ì‚¬ìš©í•˜ì—¬ OpenSearch Service ë„ë©”ì¸ì„ ë§Œë“¤ë ¤ë©´</strong></p>\n<ol>\n<li>\n<p><a href=\"https://aws.amazon.com%EC%9C%BC%EB%A1%9C\">https://aws.amazon.comìœ¼ë¡œ</a> ì´ë™í•˜ì—¬ ì½˜ì†”ì— ë¡œê·¸ì¸(Sign In to the Console)ì„ ì„ íƒí•©ë‹ˆë‹¤.</p>\n</li>\n<li>\n<p>ë¶„ì„(Analytics)ì—ì„œ Amazon OpenSearch Serviceë¥¼ ì„ íƒí•©ë‹ˆë‹¤.</p>\n</li>\n<li>\n<p>[ë„ë©”ì¸ ìƒì„±(Create domain)]ì„ ì„ íƒí•©ë‹ˆë‹¤.</p>\n</li>\n</ol>\n<p><img src=\"/e2013156ab25d5c6f8cd1f86868aabbc/es0.png\" alt=\"es0.PNG\"></p>\n<ol start=\"4\">\n<li>ë„ë©”ì¸ì˜ ì´ë¦„ì„ ì…ë ¥í•©ë‹ˆë‹¤. ë‚˜ëŠ” moviesë¼ëŠ” ì´ë¦„ì„ ì‚¬ìš©</li>\n</ol>\n<p><img src=\"/131adf9dd3529310c06f51ba0c6aec37/es1.png\" alt=\"es1.PNG\"></p>\n<ol start=\"5\">\n<li>\n<p>ì‚¬ìš©ì ì§€ì • ì—”ë“œí¬ì¸íŠ¸(Custom endpoint) ì„¤ì •ì„ ë¬´ì‹œí•©ë‹ˆë‹¤.</p>\n</li>\n<li>\n<p>ë°°í¬ ìœ í˜•ì€ ê°œë°œ ë° í…ŒìŠ¤íŠ¸(Development and testing)ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.</p>\n</li>\n</ol>\n<p><img src=\"/5407e01d29ca0303b75d2233c01422c2/es2.png\" alt=\"es2.PNG\"></p>\n<ol start=\"7\">\n<li>\n<p>ë²„ì „(Version)ì—ì„œ ìµœì‹  ë²„ì „ì„ ì„ íƒí•©ë‹ˆë‹¤.</p>\n</li>\n<li>\n<p>ë°ì´í„° ë…¸ë“œ(Data nodes)ì—ì„œ ì¸ìŠ¤í„´ìŠ¤ ìœ í˜•ì„ t3.small.searchë¡œ ë³€ê²½í•˜ê³  ì„¸ ê°œì˜ ë…¸ë“œ ê¸°ë³¸ê°’ì„ ìœ ì§€í•©ë‹ˆë‹¤.</p>\n</li>\n</ol>\n<p><img src=\"/6f5163f11bd6b5a28b0b0e67659175a7/es3.png\" alt=\"es3.PNG\"></p>\n<ol start=\"9\">\n<li>ê°„ë‹¨í•œ í™•ì¸ì„ ìœ„í•´ í¼ë¸”ë¦­ ì•¡ì„¸ìŠ¤ ë„ë©”ì¸ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. [ë„¤íŠ¸ì›Œí¬(Network)]ì—ì„œ [í¼ë¸”ë¦­ ì•¡ì„¸ìŠ¤(Public access)]ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.</li>\n</ol>\n<p><img src=\"/4ec8c8c37a8726e06965e0e3cabecafe/es4.png\" alt=\"es4.PNG\"></p>\n<ol start=\"10\">\n<li>ì„¸ë¶„í™”ëœ ì•¡ì„¸ìŠ¤ ì œì–´ ì„¤ì •ì—ì„œ ë§ˆìŠ¤í„° ì‚¬ìš©ì ìƒì„±(Create master user)ì„ ì„ íƒí•©ë‹ˆë‹¤. ì‚¬ìš©ì ì´ë¦„ê³¼ ì•”í˜¸ë¥¼ ì…ë ¥í•©ë‹ˆë‹¤.</li>\n</ol>\n<p><img src=\"/3a489533a7fc8516a83b6f193f09b9ac/es5.png\" alt=\"es5.PNG\"></p>\n<ol start=\"11\">\n<li>\n<p>ì§€ê¸ˆì€SAML ì¸ì¦ ë° Amazon Cognito ì¸ì¦ ì„¹ì…˜ì„ ë¬´ì‹œí•©ë‹ˆë‹¤.</p>\n</li>\n<li>\n<p>[ì•¡ì„¸ìŠ¤ ì •ì±…(Access policy)]ì—ì„œ [ì„¸ë¶„í™”ëœ ì•¡ì„¸ìŠ¤ ì œì–´ë§Œ ì‚¬ìš©(Only use fine-grained access control)]ì„ ì„ íƒí•©ë‹ˆë‹¤. ì´ ììŠµì„œì—ì„œëŠ” ì„¸ë¶„í™”ëœ ì•¡ì„¸ìŠ¤ ì œì–´ë¥¼ í†µí•´ ë„ë©”ì¸ ì•¡ì„¸ìŠ¤ ì •ì±…ì´ ì•„ë‹Œ ì¸ì¦ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.</p>\n</li>\n</ol>\n<p><img src=\"/c2954ccd4067510f3dfad27df3d85abc/es6.png\" alt=\"es6.PNG\"></p>\n<ol start=\"13\">\n<li>ë‚˜ë¨¸ì§€ ì„¤ì •ì€ ë¬´ì‹œí•˜ê³  [ìƒì„±(Create)]ì„ ì„ íƒí•©ë‹ˆë‹¤. ìƒˆ ë„ë©”ì¸ì€ ì¼ë°˜ì ìœ¼ë¡œ ì´ˆê¸°í™”í•˜ëŠ” ë° 15~30ë¶„ ì •ë„ ê±¸ë¦¬ì§€ë§Œ êµ¬ì„±ì— ë”°ë¼ ì‹œê°„ì´ ë” ì˜¤ë˜ ê±¸ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë„ë©”ì¸ì´ ì´ˆê¸°í™”ëœ í›„ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ê¸°ë¡í•´ ë‘¡ë‹ˆë‹¤.</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.22222222222222%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAuUlEQVQY021OSw6CMBDlwnAD0LDAA5AYFireQKJHwpWxKe20aWfagikiYeHLW7yZN5+X9P3z9WZKa1DqP2HmrCWAkHIQgnHOhyHhnGutvffkIhCR6CsjLKJzzrvFI2vDuAARk7gZwvSDlAKJ1pIJGJQOYZymiazd53maZWmWHarKIiZCSsYYAIQxTjjvtreMtaCU87ETiI51XRS7siybpomfY0Tv15xRb8uNS0Td/XE6t5f22nU3Y8wHzC0UJmoiPMgAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"es7.png\"\n        title=\"es7.png\"\n        src=\"/static/f87244c100b46f96d111fddc240b1598/37523/es7.png\"\n        srcset=\"/static/f87244c100b46f96d111fddc240b1598/e9ff0/es7.png 180w,\n/static/f87244c100b46f96d111fddc240b1598/f21e7/es7.png 360w,\n/static/f87244c100b46f96d111fddc240b1598/37523/es7.png 720w,\n/static/f87244c100b46f96d111fddc240b1598/302a4/es7.png 1080w,\n/static/f87244c100b46f96d111fddc240b1598/07a9c/es7.png 1440w,\n/static/f87244c100b46f96d111fddc240b1598/891d5/es7.png 1520w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ol start=\"14\">\n<li>Kibana URL ì„ í†µí•´ í‚¤ë°”ë‚˜ ì ‘ì†ê°€ëŠ¥</li>\n</ol>\n<p><img src=\"/d4aa3f74498c6f013967822574f32929/es8.png\" alt=\"es8.PNG\"></p>\n<h3 id=\"-2ë‹¨ê³„-ì¸ë±ì‹±ì„-ìœ„í•´-ë°ì´í„°-ì—…ë¡œë“œ\" style=\"position:relative;\"><a href=\"#-2%EB%8B%A8%EA%B3%84-%EC%9D%B8%EB%8D%B1%EC%8B%B1%EC%9D%84-%EC%9C%84%ED%95%B4-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%97%85%EB%A1%9C%EB%93%9C\" aria-label=\" 2ë‹¨ê³„ ì¸ë±ì‹±ì„ ìœ„í•´ ë°ì´í„° ì—…ë¡œë“œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ» 2ë‹¨ê³„: ì¸ë±ì‹±ì„ ìœ„í•´ ë°ì´í„° ì—…ë¡œë“œ</h3>\n<p><strong>ì˜µì…˜ 1: ë‹¨ì¼ ë¬¸ì„œ ì—…ë¡œë“œ</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">curl -X PUT -u 'ì ‘ê·¼ìœ ì €ëª…:íŒ¨ìŠ¤ì›Œë“œ' 'ì•¤ë“œí¬ì¸íŠ¸/movies/_doc/1' -d \"{\\\"director\\\": \\\"Burton, Tim\\\", \\\"genre\\\": [\\\"Comedy\\\",\\\"Sci-Fi\\\"], \\\"year\\\": 1996, \\\"actor\\\": [\\\"Jack Nicholson\\\",\\\"Pierce Brosnan\\\",\\\"Sarah Jessica Parker\\\"], \\\"title\\\": \\\"Mars Attacks!\\\"}\" -H Content-Type:application/json</code></pre></div>\n<p><strong>ì˜µì…˜ 2: ì—¬ëŸ¬ ë¬¸ì„œ ì—…ë¡œë“œ</strong></p>\n<p>bulk_movies.json ì´ë¼ëŠ” ë¡œì»¬ íŒŒì¼ì„ ìƒì„±í•©ë‹ˆë‹¤. ë‹¤ìŒ ë‚´ìš©ì„ íŒŒì¼ì— ë³µì‚¬í•˜ì—¬ ë¶™ì—¬ë„£ê³ , í›„í–‰ ì¤„ë°”ê¿ˆì„ ì¶”ê°€í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span> <span class=\"token property\">\"index\"</span> <span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token property\">\"_index\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"movies\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"_id\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"2\"</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">{</span><span class=\"token property\">\"director\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Frankenheimer, John\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"genre\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"Drama\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Mystery\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Thriller\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Crime\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"year\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1962</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"actor\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"Lansbury, Angela\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Sinatra, Frank\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Leigh, Janet\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Harvey, Laurence\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Silva, Henry\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Frees, Paul\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Gregory, James\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Bissell, Whit\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"McGiver, John\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Parrish, Leslie\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Edwards, James\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Flowers, Bess\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Dhiegh, Khigh\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Payne, Julie\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Kleeb, Helen\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Gray, Joe\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Nalder, Reggie\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Stevens, Bert\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Masters, Michael\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Lowell, Tom\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"title\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"The Manchurian Candidate\"</span><span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">{</span> <span class=\"token property\">\"index\"</span> <span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token property\">\"_index\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"movies\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"_id\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"3\"</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">{</span><span class=\"token property\">\"director\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Baird, Stuart\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"genre\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"Action\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Crime\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Thriller\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"year\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1998</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"actor\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"Downey Jr., Robert\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Jones, Tommy Lee\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Snipes, Wesley\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Pantoliano, Joe\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Jacob, Ir\\u00e8ne\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Nelligan, Kate\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Roebuck, Daniel\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Malahide, Patrick\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Richardson, LaTanya\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Wood, Tom\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Kosik, Thomas\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Stellate, Nick\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Minkoff, Robert\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Brown, Spitfire\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Foster, Reese\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Spielbauer, Bruce\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Mukherji, Kevin\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Cray, Ed\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Fordham, David\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Jett, Charlie\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"title\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"U.S. Marshals\"</span><span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">{</span> <span class=\"token property\">\"index\"</span> <span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token property\">\"_index\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"movies\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"_id\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"4\"</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">{</span><span class=\"token property\">\"director\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Ray, Nicholas\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"genre\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"Drama\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Romance\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"year\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1955</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"actor\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"Hopper, Dennis\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Wood, Natalie\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Dean, James\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Mineo, Sal\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Backus, Jim\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Platt, Edward\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Ray, Nicholas\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Hopper, William\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Allen, Corey\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Birch, Paul\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Hudson, Rochelle\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Doran, Ann\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Hicks, Chuck\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Leigh, Nelson\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Williams, Robert\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Wessel, Dick\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Bryar, Paul\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Sessions, Almira\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"McMahon, David\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Peters Jr., House\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"title\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Rebel Without a Cause\"</span><span class=\"token punctuation\">}</span>\r\n</code></pre></div>\n<p>íŒŒì¼ì´ ì €ì¥ë˜ëŠ” ë¡œì»¬ ë””ë ‰í„°ë¦¬ì—ì„œ ë‹¤ìŒ ëª…ë ¹ì„ ì‹¤í–‰í•˜ì—¬ movies ë„ë©”ì¸ì— íŒŒì¼ì„ ì—…ë¡œë“œí•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">curl -XPOST -u master-user:master-user-password domain-endpoint/_bulk --data-binary @bulk_movies.json -H Content-Type:application/json</code></pre></div>\n<h3 id=\"-3ë‹¨ê³„-opensearch-serviceì—ì„œ-ë¬¸ì„œ-ê²€ìƒ‰\" style=\"position:relative;\"><a href=\"#-3%EB%8B%A8%EA%B3%84-opensearch-service%EC%97%90%EC%84%9C-%EB%AC%B8%EC%84%9C-%EA%B2%80%EC%83%89\" aria-label=\" 3ë‹¨ê³„ opensearch serviceì—ì„œ ë¬¸ì„œ ê²€ìƒ‰ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ’» 3ë‹¨ê³„: OpenSearch Serviceì—ì„œ ë¬¸ì„œ ê²€ìƒ‰</h3>\n<p>Amazon OpenSearch Service ë„ë©”ì¸ì—ì„œ ë¬¸ì„œë¥¼ ê²€ìƒ‰í•˜ë ¤ë©´ OpenSearch ê²€ìƒ‰ APIë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>\n<p><strong>ëª…ë ¹ì¤„ì—ì„œ ë¬¸ì„œ ê²€ìƒ‰</strong></p>\n<p>ë‹¤ìŒ ëª…ë ¹ì„ ì‹¤í–‰í•˜ì—¬ movies ë„ë©”ì¸ì—ì„œ marsë¥¼ ê²€ìƒ‰í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">curl -XGET -u master-user:master-user-password domain-endpoint/movies/_search?q=mars</code></pre></div>\n<p><strong>Kibanaì—ì„œ ê²€ìƒ‰</strong></p>\n<p>Query Workbench í´ë¦­</p>\n<p><img src=\"/8dffbba3e36ab212e4bd93fcfe35c263/es9.png\" alt=\"es9.PNG\"></p>\n<p>Query editor ì— ì•„ë˜ì˜ ì¿¼ë¦¬ RUN</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">select</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">from</span> movies<span class=\"token punctuation\">;</span></code></pre></div>\n<p>ë°ì´í„° í™•ì¸</p>\n<p><img src=\"/dc7d8e2ee305356550ff29e02ca0e9da/es10.png\" alt=\"es10.PNG\"></p>\n<h3 id=\"-4ë‹¨ê³„-opensearch-service-ë„ë©”ì¸-ì‚­ì œ\" style=\"position:relative;\"><a href=\"#-4%EB%8B%A8%EA%B3%84-opensearch-service-%EB%8F%84%EB%A9%94%EC%9D%B8-%EC%82%AD%EC%A0%9C\" aria-label=\" 4ë‹¨ê³„ opensearch service ë„ë©”ì¸ ì‚­ì œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>âš± 4ë‹¨ê³„: OpenSearch Service ë„ë©”ì¸ ì‚­ì œ</h3>\n<p><strong>ì½˜ì†”ì—ì„œ OpenSearch Service ë„ë©”ì¸ì„ ì‚­ì œí•˜ë ¤ë©´</strong></p>\n<p>Amazon OpenSearch Service ì½˜ì†”ì— ë¡œê·¸ì¸í•©ë‹ˆë‹¤.</p>\n<p>[ë„ë©”ì¸(Domains)]ì—ì„œ movies ë„ë©”ì¸ì„ ì„ íƒí•©ë‹ˆë‹¤.</p>\n<p>[ì‚­ì œ(Delete)]ë¥¼ ì„ íƒí•˜ê³  ì‚­ì œ ì˜ì‚¬ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.</p>\n<h2 id=\"-ëŠë‚€ì \" style=\"position:relative;\"><a href=\"#-%EB%8A%90%EB%82%80%EC%A0%90\" aria-label=\" ëŠë‚€ì  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ¢ ëŠë‚€ì </h2>\n<p>ì•„ë§ˆ ì˜¤í”ˆì„œì¹˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ì‚¬ëŒì´ë¼ë©´ í‚¤ë°”ë‚˜ì˜ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ”ê²ƒì— ê°ì‚¬í•¨ì„ ëŠë¼ë©° í‚¤ë°”ë‚˜ë¥¼ í™œìš©ì„ ë§ì´ í• ë“¯ì‹¶ë‹¤..</p>\n<p>ì½˜ì†”ë¡œë„ ê°€ëŠ¥í•œ ê¸°ëŠ¥ë“¤ì´ ë§ì§€ë§Œ í™•ì‹¤íˆ ì¿¼ë¦¬ì— ìµìˆ™í•œ ì‚¬ëŒì´ë¼ë©´ í‚¤ë°”ë‚˜ë¥¼ ì‚¬ìš©í•˜ëŠ”ê±¸ ì¶”ì²œí•œë‹¤.</p>\n<p>ê·¸ë¦¬ê³  ìš”ë²ˆ íŠœí† ë¦¬ì–¼ì—ëŠ” í¼ë¸”ë¦­ìœ¼ë¡œ ë„ë©”ì¸ì„ ìƒì„±í•˜ì—¬ì„œ ê°„ë‹¨í•˜ê²Œ í…ŒìŠ¤íŠ¸ í–ˆì§€ë§Œ ì‹¤ì œ í”„ë¡œì íŠ¸ì—ì„œ vpc ì—‘ì„¸ìŠ¤ë¥¼ ê¶Œì¥í•œë‹¤</p>\n<p>ë‹¤ìŒì—ëŠ” ìŠ¤í”„ë§ ë¶€íŠ¸ì—ì„œ ì˜¤í”ˆì„œì¹˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì„ í¬ìŠ¤íŒ…í•  ì˜ˆì •ì´ë‹¤.</p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#-%EA%B0%9C%EC%9A%94\">ğŸˆ ê°œìš”</a></p>\n</li>\n<li>\n<p><a href=\"#-amazon-opensearch-service-%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0\">ğŸš€ Amazon OpenSearch Service ì‹œì‘í•˜ê¸°</a></p>\n<ul>\n<li><a href=\"#-1%EB%8B%A8%EA%B3%84-opensearch-service-%EB%8F%84%EB%A9%94%EC%9D%B8-%EC%83%9D%EC%84%B1\">ğŸ¦– 1ë‹¨ê³„: OpenSearch Service ë„ë©”ì¸ ìƒì„±</a></li>\n<li><a href=\"#-2%EB%8B%A8%EA%B3%84-%EC%9D%B8%EB%8D%B1%EC%8B%B1%EC%9D%84-%EC%9C%84%ED%95%B4-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%97%85%EB%A1%9C%EB%93%9C\">ğŸ» 2ë‹¨ê³„: ì¸ë±ì‹±ì„ ìœ„í•´ ë°ì´í„° ì—…ë¡œë“œ</a></li>\n<li><a href=\"#-3%EB%8B%A8%EA%B3%84-opensearch-service%EC%97%90%EC%84%9C-%EB%AC%B8%EC%84%9C-%EA%B2%80%EC%83%89\">ğŸ’» 3ë‹¨ê³„: OpenSearch Serviceì—ì„œ ë¬¸ì„œ ê²€ìƒ‰</a></li>\n<li><a href=\"#-4%EB%8B%A8%EA%B3%84-opensearch-service-%EB%8F%84%EB%A9%94%EC%9D%B8-%EC%82%AD%EC%A0%9C\">âš± 4ë‹¨ê³„: OpenSearch Service ë„ë©”ì¸ ì‚­ì œ</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-%EB%8A%90%EB%82%80%EC%A0%90\">ğŸ¢ ëŠë‚€ì </a></p>\n</li>\n</ul>\n</div>","frontmatter":{"date":"March 14, 2022","title":"AWS OpenSearch(Elasticsearch) ì‚¬ìš©ë²•","categories":"AWS","author":"ì©¡ê¸°","emoji":"ğŸ„"},"fields":{"slug":"/gatsby-aws-history-of-opensearch-tuto/"}},"prev":{"id":"5646d063-e1bf-5b91-8f3c-9941d1512d37","html":"<h2 id=\"-lambda-layersì˜-í•µì‹¬\" style=\"position:relative;\"><a href=\"#-lambda-layers%EC%9D%98-%ED%95%B5%EC%8B%AC\" aria-label=\" lambda layersì˜ í•µì‹¬ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸˆ Lambda Layersì˜ í•µì‹¬?</h2>\n<p><strong>â€œLambdaì— ì½”ë“œ ë§Œë“¤ì–´ ì˜¬ë¦´ ë•Œ ë§¤ë²ˆ íŒ¨í‚¤ì§€(pip íŒ¨í‚¤ì§€ ë“±) ì„¸íŠ¸ ë§Œë“¤ì–´ ì˜¬ë¦¬ëŠ”ê±° ê·€ì°®ì•˜ì§€? ê°™ì€ Dependency ê°€ì§€ëŠ” í•¨ìˆ˜ë¼ë©´ ì½”ë“œë§Œ ë”°ë¡œ ë¹¼ê³  ì˜ì¡´ì„± íŒ¨í‚¤ì§€ëŠ” Layersë¼ëŠ” ê³³ìœ¼ë¡œ ë¹¼ì„œ ì‚¬ìš©í•´!â€</strong></p>\n<p>ì¦‰, êµ‰ì¥íˆ í¸ë¦¬í•´ì§„ ìš”ì†Œê°€ ì¶”ê°€ëœ ê²ƒì´ì£ . ê·¸ë ‡ë‹¤ë©´ LayersëŠ” ì–´ë–»ê²Œ ë™ì‘í• ê¹Œìš”?</p>\n<blockquote>\n<p>âœ… ëŒë‹¤ ì‚¬ìš©ì„ ìœ„í•´ ê°„ë‹¨í•œ ì˜ˆì œë¥¼ í†µí•œ ì‹¤ìŠµì„ í•´ë³´ì.</p>\n</blockquote>\n<h2 id=\"íŠœí† ë¦¬ì–¼\" style=\"position:relative;\"><a href=\"#%ED%8A%9C%ED%86%A0%EB%A6%AC%EC%96%BC\" aria-label=\"íŠœí† ë¦¬ì–¼ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ•íŠœí† ë¦¬ì–¼</h2>\n<h3 id=\"lambda-layersëŠ”-ì–´ë–»ê²Œ-ì‚¬ìš©í•˜ë‚˜ìš”\" style=\"position:relative;\"><a href=\"#lambda-layers%EB%8A%94-%EC%96%B4%EB%96%BB%EA%B2%8C-%EC%82%AC%EC%9A%A9%ED%95%98%EB%82%98%EC%9A%94\" aria-label=\"lambda layersëŠ” ì–´ë–»ê²Œ ì‚¬ìš©í•˜ë‚˜ìš” permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Lambda LayersëŠ” ì–´ë–»ê²Œ ì‚¬ìš©í•˜ë‚˜ìš”?</h3>\n<h3>Lambda í•¨ìˆ˜ë¡œ ë§Œë“¤ ì½”ë“œ ì‘ì„±í•˜ê¸°</h3>\n<p>ì•„ì£¼ì•„ì£¼ ê°„ë‹¨í•˜ê³  ì‹¬í”Œí•œ í¬ë¡¤ë§ ì½”ë“œë¥¼ Lambdaì— ì˜¬ë ¤ ì‚¬ìš©í•œë‹¤ê³  ê°€ì •í•´ë´…ì‹œë‹¤. í•´ë‹¹ ì½”ë“œëŠ” requestsì™€ bs4ë¼ëŠ” ëª¨ë“ˆì„ ì‚¬ìš©í•©ë‹ˆë‹¤.\r\nì´ ë¸”ë¡œê·¸ë¥¼ ê¸ì–´ h1íƒœê·¸ í•˜ë‚˜ì˜ ê¸€ìë¥¼ ê°€ì ¸ì™€ë´…ì‹œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"py\"><pre class=\"language-py\"><code class=\"language-py\"><span class=\"token keyword\">import</span> json\r\n<span class=\"token keyword\">import</span> requests\r\n\r\n<span class=\"token keyword\">from</span> bs4 <span class=\"token keyword\">import</span> BeautifulSoup <span class=\"token keyword\">as</span> bs\r\n\r\n<span class=\"token keyword\">def</span> <span class=\"token function\">lambda_handler</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n    <span class=\"token comment\"># TODO implement</span>\r\n    res <span class=\"token operator\">=</span> requests<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'https://github.com/LeeSungKi'</span><span class=\"token punctuation\">)</span>\r\n    soup <span class=\"token operator\">=</span> bs<span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">,</span> <span class=\"token string\">'html.parser'</span><span class=\"token punctuation\">)</span>\r\n    blog_title <span class=\"token operator\">=</span> soup<span class=\"token punctuation\">.</span>select_one<span class=\"token punctuation\">(</span><span class=\"token string\">'h1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>text\r\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token string\">'statusCode'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">200</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token string\">'body'</span><span class=\"token punctuation\">:</span> json<span class=\"token punctuation\">.</span>dumps<span class=\"token punctuation\">(</span>blog_title<span class=\"token punctuation\">)</span>\r\n    <span class=\"token punctuation\">}</span></code></pre></div>\n<p>í•˜ì§€ë§Œ ì•„ë¬´ëŸ° ì¤€ë¹„ ì—†ì´ AWS Lambda ì½˜ì†”ì—ì„œ ìœ„ ì½”ë“œë¥¼ ì €ì¥í•˜ê³  ì‹¤í–‰í•˜ë©´ ì•„ë˜ì™€ ê°™ì€ No module named â€˜requestsâ€™ ì—ëŸ¬ê°€ ë‚©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Response:\r\n{\r\n  \"errorMessage\": \"Unable to import module 'lambda_function'\"\r\n}\r\n\r\n...\r\n\r\nUnable to import module 'lambda_function': No module named 'requests'</code></pre></div>\n<p>ìœ„ ì—ëŸ¬ ë©”ì‹œì§€ëŠ” requestsë¼ëŠ” ëª¨ë“ˆì„ ì°¾ì„ ìˆ˜ ì—†ë‹¤ëŠ” íŒŒì´ì¬ ì—ëŸ¬ì…ë‹ˆë‹¤. ë‹¹ì—°íˆ ì„¤ì¹˜ë˜ì–´ìˆì§€ ì•Šê¸° ë•Œë¬¸ì— ì—ëŸ¬ê°€ ë°œìƒí•©ë‹ˆë‹¤. Lambda Layersë¥¼ ì´ìš©í•´ ì´ ì´ìŠˆë¥¼ í•´ê²°í•´ë´…ì‹œë‹¤.</p>\n<h3>í¬ë¡¤ë§ ì˜ì¡´ íŒ¨í‚¤ì§€ë“¤ Lambda Layersë¡œ ë§Œë“¤ê¸°</h3>\n<p>ì´ì œ AWS Lambda Consoleì„ ì¼œ ì¤ì‹œë‹¤. Lambda ì„œë¹„ìŠ¤ í•­ëª© ì¤‘ â€œê³„ì¸µâ€ í˜¹ì€ Layersë¥¼ ëˆ„ë¥´ê³  â€œê³„ì¸µ ìƒì„±â€ì„ ëˆŒëŸ¬ì¤ì‹œë‹¤.</p>\n<p><img src=\"/463e22d35d47026d5c0e64cf5f8545ef/layers1.png\" alt=\"layers1.PNG\"></p>\n<p>ì•„ë˜ì™€ ê°™ì´ ìƒˆë¡œìš´ Lambda Layerë¥¼ ìƒì„±í•˜ëŠ” ì°½ì´ ëœ¹ë‹ˆë‹¤.</p>\n<p><img src=\"/153ff4068a8edb6d223f74faa2ae1e0c/layers2.png\" alt=\"layers2.PNG\"></p>\n<p>ì´ì œ requestsì™€ bs4ê°€ ë“¤ì–´ìˆëŠ” zip ì••ì¶•íŒŒì¼ì„ ì—…ë¡œë“œí•´ì•¼ í•˜ëŠ”ë°ìš”, í¬ë¡¤ë§ì„ ìœ„í•œ íŒ¨í‚¤ì§€ê°€ ì•„ë˜ Github Repoì— ì¤€ë¹„ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì•„ë˜ Direct Download ë§í¬ë¥¼ í†µí•´ pack.zipíŒŒì¼ì„ ë°›ì•„ ì—…ë¡œë“œ í•´ì£¼ì„¸ìš”.</p>\n<blockquote>\n<p>Github Repo: <a href=\"https://github.com/LeeSungKi/OpenSearchApp/blob/main/pack.zip\">https://github.com/LeeSungKi/OpenSearchApp/blob/main/pack.zip</a></p>\n</blockquote>\n<ul>\n<li>requests + bs4 + lxml + requests_aws4auth</li>\n</ul>\n<p>ê·¸ë¦¬ê³  Runtimeìœ¼ë¡œ python3.7/python3.8ë¥¼ ì„ íƒí•´ ì¤ì‹œë‹¤. (ì—¬ëŸ¬ë¶„ì´ Layerë¥¼ ë§Œë“¤ë•ŒëŠ” í•´ë‹¹ Layerê°€ ì‚¬ìš©ë  í™˜ê²½ì„ ëª¨ë‘ ì„ íƒí•´ì£¼ì„¸ìš”.)</p>\n<p>ì—…ë¡œë“œê°€ ì„±ê³µí•˜ë©´ ì•„ë˜ì™€ ê°™ì´ ìƒˆë¡œìš´ Lambda Layerê°€ ìƒì„±ë©ë‹ˆë‹¤. ì°¸ê³ ë¡œ ê°ê°ì˜ LayerëŠ” ë²„ì „ë³„ë¡œ ìˆ˜ì •ì´ ë¶ˆê°€ëŠ¥í•˜ê³  ë§Œì•½ ìˆ˜ì •ì´ í•„ìš”í•˜ë‹¤ë©´ zipíŒŒì¼ì„ ë‹¤ì‹œ ì˜¬ë¦¬ê³  ìƒˆë¡œìš´ ë¦¬ë¹„ì „ì´ ìƒì„±ë©ë‹ˆë‹¤.</p>\n<p><img src=\"/c73ceb1547312f5ea1d0f59c6bfdfb03/layers3.png\" alt=\"layers3.PNG\"></p>\n<h3>Lambda Function ìƒì„± + Layers ë¶™ì´ê¸°</h3>\n<p>ë‚´ê°€ ë§Œë“¤ì–´ë†“ì€ testLayer ë¼ëŠ” ëŒë‹¤ì— layersë¥¼ ì¶”ê°€í•´ ë³´ê² ë‹¤.</p>\n<p>ìƒì„±í•œ ëŒë‹¤ì— ë“¤ì–´ê°€ë©´ ì•„ë˜ì— ê³„ì¸µì´ë¼ëŠ” ë¶€ë¶„ì— Add A Layer í´ë¦­í•œë‹¤.</p>\n<p><img src=\"/c4fd070af2e6b4772082dcacf3864dab/layers4.png\" alt=\"layers4.PNG\"></p>\n<p>ì•„ë˜ì™€ ê°™ì´ ë‚´ê°€ ë§Œë“  ê³„ì¸µì„ ì¶”ê°€í•´ ì¤€ë‹¤.</p>\n<p><img src=\"/35ba1b1b0cc212bc47ed83f7bdced859/layers5.png\" alt=\"layers5.PNG\"></p>\n<p>ì•„ë˜ì™€ ê°™ì´ Layersê°€ ì¶”ê°€ëœê±¸ í™•ì¸ í• ìˆ˜ ìˆë‹¤.</p>\n<p><img src=\"/2813dfea7f1e7b6e1b75b0b32e0e8bbc/layers6.png\" alt=\"layers6.PNG\"></p>\n<p>ì´ì œ Test ë²„íŠ¼ì„ ëˆŒëŸ¬ë³´ì</p>\n<p>ì•„ë˜ì²˜ëŸ¼ ì—ëŸ¬ì—†ì´ í¬ë¡¤ë§ ë˜ëŠ”ê²ƒì„ ì•Œìˆ˜ ìˆë‹¤.</p>\n<p><img src=\"/81ea7134e65711c44e130ee6fe3286a0/layers7.png\" alt=\"layers7.PNG\"></p>\n<p>íŒŒì´ì¬ì€ ê¸°ë³¸ì ìœ¼ë¡œ í˜„ì¬ í´ë”, ê·¸ë¦¬ê³  ì‹¤í–‰í•˜ëŠ” íŒŒì´ì¬ì´ ì°¸ê³ í•˜ëŠ” PYTHON PATHë“¤ì„ ì°¸ê³ í•´ ì—¬ëŸ¬ íŒ¨í‚¤ì§€ì™€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ importí•©ë‹ˆë‹¤.\r\nLambda Layersê°€ ì••ì¶• í•´ì œëœ /optí´ë”ëŠ” í•´ë‹¹ PATHì— ë“¤ì–´ìˆì§€ ì•Šì•„ importí•  ë•Œ Pythonì´ íƒìƒ‰í•˜ëŠ” ëŒ€ìƒì— í¬í•¨ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\r\nëŒ€ì‹ , ìš°ë¦¬ê°€ ë°©ê¸ˆ ë‹¤ìš´ë°›ì€ íŒ¨í‚¤ì§€ì§€ ì•ˆì˜ python í´ë”ê°€ /opt/pythonì— ì••ì¶•ì´ í•´ì œë˜ê³  í•´ë‹¹ í´ë”ëŠ” PYTHONPATH í™˜ê²½ë³€ìˆ˜ ë‚´ì— í¬í•¨ë˜ê²Œ ë©ë‹ˆë‹¤.</p>\n<h3 id=\"ë§ˆë¬´ë¦¬\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"ë§ˆë¬´ë¦¬ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸŒ­ë§ˆë¬´ë¦¬</h3>\n<p>ì´ë²ˆ ê¸€ì—ì„œëŠ” êµ‰ì¥íˆ ê°€ë²¼ìš´ íŒ¨í‚¤ì§€ë“¤ë§Œ ì‚¬ìš©í–ˆì§€ë§Œ</p>\n<p>AWS Lambdaì˜ â€˜250MBâ€™ í¬ê¸° ì œì•½ì€ ì—¬ì „íˆ â€œí•œ í•¨ìˆ˜ì˜ ì†ŒìŠ¤ì½”ë“œ í¬ê¸° + Layers í¬ê¸° í•©â€ìœ¼ë¡œ ë˜ì–´ìˆê¸° ë•Œë¬¸ì— Layerë¥¼ ìª¼ê°œë”ë¼ë„ ì´ í•©ì´ â€˜250MBâ€™ë¡œ ê±¸ë¦°ë‹¤ëŠ” ì ì€ ì•„ì‰½ìŠµë‹ˆë‹¤.</p>\n<p>ë‹¤ë§Œ ì¼ìƒì ì¸ ìˆ˜ì •ì´ í•„ìš”í•œ ê²½ìš°, ê·¸ë¦¬ê³  Proof of concept ê°™ì€ ìƒí™©ì—ì„œ Lambda í™˜ê²½ì„ í…ŒìŠ¤íŠ¸í•˜ê¸° ìœ„í•´ì„œëŠ” ì´ ê¸€ì—ì„œ ì†Œê°œí•œ AWS Lambda Layersë¥¼ ì ê·¹ í™œìš©í•´ ë³´ëŠ” ê²ƒì´ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.</p>\n<br>\r\n<br>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#-lambda-layers%EC%9D%98-%ED%95%B5%EC%8B%AC\">ğŸˆ Lambda Layersì˜ í•µì‹¬?</a></p>\n</li>\n<li>\n<p><a href=\"#%ED%8A%9C%ED%86%A0%EB%A6%AC%EC%96%BC\">ğŸ•íŠœí† ë¦¬ì–¼</a></p>\n<ul>\n<li><a href=\"#lambda-layers%EB%8A%94-%EC%96%B4%EB%96%BB%EA%B2%8C-%EC%82%AC%EC%9A%A9%ED%95%98%EB%82%98%EC%9A%94\">Lambda LayersëŠ” ì–´ë–»ê²Œ ì‚¬ìš©í•˜ë‚˜ìš”?</a></li>\n<li><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\">ğŸŒ­ë§ˆë¬´ë¦¬</a></li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"March 21, 2022","title":"Lambda Layers ì‚¬ìš©í•˜ê¸°","categories":"AWS","author":"ì©¡ê¸°","emoji":"ğŸš€"},"fields":{"slug":"/gatsby-aws-study-lambda-import-tutorial/"}},"site":{"siteMetadata":{"siteUrl":"https://leesungki.github.io","comments":{"utterances":{"repo":"LeeSungKi/leesungki.github.io"}}}}},"pageContext":{"slug":"/springbootStudyOpensearch/","nextSlug":"/gatsby-aws-history-of-opensearch-tuto/","prevSlug":"/gatsby-aws-study-lambda-import-tutorial/"}},
    "staticQueryHashes": ["1073350324","1956554647","2938748437"]}