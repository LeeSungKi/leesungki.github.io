---
emoji: âœ’
title: AWS S3 ë²„í‚· ì •ì±… í¸ì§‘
date: '2022-01-26 13:54:00'
author: ì©¡ê¸°
tags: AWS S3 ë²„í‚·ì •ì±… 
categories: AWS
imageUrl: 's3.jpg'
---

## ğŸ‘€ ì‚¬ìš© ê³„ê¸°

í”„ë¡œì íŠ¸ ì§„í–‰ ì¤‘ ì™¸ë¶€ api ì—°ë™ ê³¼ì œ ì§„í–‰ ì¤‘ì— privateí•œ s3 ìŠ¤í† ë¦¬ì§€ì—ì„œ ë“ì • ë„ë©”ì¸ì˜ ì ‘ê·¼ì„ í—ˆìš©í•˜ëŠ” ë°©ì‹ì´ í•„ìš”í•˜ê²Œ ë˜ì—ˆë‹¤.

> â—TMIâ— : ë„¤ì´ë²„ ocr ê¸°ëŠ¥ì„ ì‚¬ìš© ì¤‘ s3ì— ì €ì¥ë˜ì–´ ìˆëŠ” ì´ë¯¸ì§€ íŒŒì¼ì„ ì½ì–´ ì™€ì•¼ í•˜ëŠ”ë° ë³´ì•ˆ íŠ¹ì„±ìƒ
> s3 ë²„í‚·ì„ public í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ê°€ ì—†ì—ˆê³  ê·¸ë¡œ ì¸í•´ naver apiì˜ ì ‘ê·¼ì´ ë¶ˆê°€ëŠ¥í–ˆë‹¤..ğŸ˜…
> ë¬¸ì œ í•´ê²°ì„ ìœ„í•´ aws s3 ë¬¸ì„œë¥¼ ì½ëŠ” ì¤‘ ë²„í‚·ì˜ ì •ì±…ì„ ë³€ê²½í•˜ì—¬ íŠ¹ì • ë„ë©”ì¸ì˜ ì ‘ê·¼ì„ ê°€ëŠ¥í•˜ê²Œ í•˜ëŠ”
> ë°©ë²•ì„ ì°¾ì•˜ê³  ë‚˜ì˜ ì‚½ì§ˆì„ ê¸°ë¡í•œë‹¤..ğŸ˜‚

## ğŸ—‘ HTTP Refererë€?
`HTTPëŠ” í—¤ë”ê°’ìœ¼ë¡œ ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ ìƒì„±í•˜ëŠ” ë°ì´í„°`

ì˜ˆë¥¼ë“¤ì–´ http://naver.com ì›¹ì‚¬ì´íŠ¸ì—ì„œ ì ‘ê·¼ì‹œì— í•´ë‹¹ Resourceë¡œ ë³´ë‚´ëŠ” HTTP í—¤ë”ì˜ Refererê°’ì€ http://naver.com ì…ë‹ˆë‹¤. 
S3ì—ì„œëŠ” ì´ Refererê°’ì„ íŒë‹¨í•´ íŒŒì¼ì„ ë³´ì—¬ì¤„ì§€ ë§ì§€ ì œí•œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## âœ… Bucket ìƒì„±í•˜ê¸°

í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ ë²„í‚·ì„ ìƒì„±í•´ì¤€ë‹¤.<br>

s3 ë²„í‚· ìƒì„±ì— ëŒ€í•œ ìë£ŒëŠ” ì—¬ê¸°ì—ì„œ ì°¸ê³  ë°”ëë‹ˆë‹¤. ğŸ‘‰[Bucket ìƒì„±](https://leesungki.github.io/gatsby-aws-study-s3-makeBucket/)

<br>

## â™» ì •ì±… í¸ì§‘

<h4>ìƒì„±í•œ ë²„í‚·ì˜ ê¶Œí•œíƒ­ í´ë¦­í•œë‹¤.
<br>
<br>

![referer1.png](referer1.png)

<h4>í•´ë‹¹ ë²„í‚·ì´ ê°€ì§€ê³  ìˆëŠ” ê¶Œí•œ ì •ë³´ ì—ì„œ í¼ë¸”ë¦­ ì•¡ì„¸ìŠ¤ ì°¨ë‹¨ í¸ì§‘ ë²„íŠ¼ í´ë¦­í•œë‹¤.

<br>
<br>

![referer2.png](referer2.png)
<br>
<h4>ìƒˆ í¼ë¸”ë¦­ ë²„í‚· ë˜ëŠ” ì•¡ì„¸ìŠ¤ ì§€ì  ì •ì±…ì„ í†µí•´ ë¶€ì—¬ëœ ë²„í‚· ë° ê°ì²´ì— ëŒ€í•œ í¼ë¸”ë¦­ ì•¡ì„¸ìŠ¤ ì°¨ë‹¨ ì²´í¬ í›„ ë³€ê²½ ì‚¬í•­ ì €ì¥
<br>
<br>

![referer3.png](referer3.png)
<br>
<br>

ê¶Œí•œ íƒ­ìœ¼ë¡œ ëŒì•„ê°€ ë²„í‚· ì •ì±… í¸ì§‘ ë²„íŠ¼ì„ í´ë¦­í•œë‹¤.

![referer4.png](referer4.png)

ì •ì±… ìƒì„±ê¸° ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ìë™ìœ¼ë¡œ ì •ì±…ì„ ìƒì„±í•´ì£¼ëŠ” ì›¹ í˜ì´ì§€ë¡œ ì´ë™í•œë‹¤.
<br>

![referer5.png](referer5.png)

<br>

![referer6.png](referer6.png)

- Select Type of Policy : S3 Bucket Policy 
- Effect : Allow
- Principal : *
- AWS Service : Amazon SQS
- Actions : GetObject
- Amazon Resource Name (ARN) : "ë²„í‚· ARN"/* `ex) arn:aws:s3:::referer-test-buck/*`

<h4>Add Conditions (Optional) í´ë¦­
<br>
<br>

![referer7.png](referer7.png)

- Condition : StringLike
- Key : aws:Referer
- Value : ì ‘ê·¼ í—ˆìš©í•  ë„ë©”ì¸(http referer)/* `ex)http://clovaocr-api-kr.ncloud.com/external/v1/*`
<br>
<br>
<h4>ì…ë ¥í›„ Add Condition í´ë¦­ í•˜ë©´ Condition ì¶”ê°€ëœë‹¤ ê·¸í›„
Add Statement í´ë¦­ í•˜ë©´ ì•„ë˜ì™€ ê°™ì´ ì •ì±…ì´ ìƒì„±ëœë‹¤.
<br>
<br>

![referer8.png](referer8.png)

<br>
<br>
<h4>ë§ˆì§€ë§‰ ìœ¼ë¡œ Generate Policy ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ìœ„ì—ì„œ ì§€ì •í•œ ì •ì±…ì´ json í˜•íƒœë¡œ ìƒì„±ë˜ëŠ” ê²ƒì„ í™•ì¸í• ìˆ˜ ìˆë‹¤.
<br>
<br>

![referer9.png](referer9.png)

<br>
<br>
<h4>í•´ë‹¹ ê°’ì„ ë³µì‚¬í•˜ì—¬ ë²„í‚· ì •ì±… í¸ì§‘ ì°½ì— ë„£ì–´ì£¼ê³  ë³€ê²½ ì‚¬í•­ ì €ì¥ í´ë¦­
<br>
<br>

![referer10.png](referer10.png)

<br>
<br>
<h4>ì´ì œ ì •ì±…ì´ ì •ìƒ ë°˜ì˜ë˜ì—ˆëŠ”ì§€ í™•ì¸í•´ë³´ì. ë²„í‚·ì— ì´ë¯¸ì§€ íŒŒì¼ì„ í•˜ë‚˜ ì—…ë¡œë“œ í•œë‹¤ìŒ.
<br>
<br>

![referer11.png](referer11.png)

<h4>ê°ì²´ë¥¼ í´ë¦­í•˜ì—¬ ë“¤ì–´ê°€ ë³´ë©´ ê°ì²´ URLì„ í™•ì¸í• ìˆ˜ ìˆë‹¤.
<br>
<br>

![referer12.png](referer12.png)
<br>
<br>
í´ë¦­ì„ í•´ë³´ë©´ ì•„ë˜ì™€ ê°™ì´ Access Deniedê°€ ëœ¨ëŠ”ê±¸ í™•ì¸ í• ìˆ˜ìˆë‹¤.

![referer13.png](referer13.png)
<br>
<br>
ê·¸ë ‡ë‹¤ ìš°ë¦¬ê°€ ì§€ì •í•œ referer ë¡œ ì ‘ê·¼í•œê²Œ ì•„ë‹ˆê¸° ë•Œë¬¸ì´ë‹¤.

ê·¸ë ‡ë‹¤ë©´ ì–´ë–»ê²Œ í™•ì¸ í• ìˆ˜ ìˆì„ê¹Œ? ê°„ë‹¨í•˜ê²Œ postmanì„ í™œìš©í•˜ì—¬ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•´ë³´ì.

GET ë°©ì‹ìœ¼ë¡œ ê°ì²´ URL ì„ ë„£ì–´ì£¼ê³  Headers ì— ìš°ë¦¬ê°€ ì§€ì •í•œ Refererì„ ë„£ê³  í˜¸ì¶œí•´ë³´ë©´
ì´ë¯¸ì§€ê°€ ì •ìƒì ìœ¼ë¡œ ëœ¨ëŠ”ê²ƒì„ í™•ì¸í• ìˆ˜ ìˆë‹¤.
<br>
<br>

![referer15.png](referer15.png)
<br>
<br>
<br>
<br>
<br>
<br>

```toc

```
